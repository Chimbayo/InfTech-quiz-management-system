(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{6521:function(e,t,s){Promise.resolve().then(s.bind(s,6717))},6717:function(e,t,s){"use strict";s.d(t,{EditQuizForm:function(){return w}});var i=s(7437),r=s(2265),n=s(9376),a=s(9501),o=s(3590),l=s(7119),c=s(2381),d=s(279),u=s(5060),m=s(9820),x=s(8245),p=s(5937),f=s(2660),h=s(9397),v=s(8930),j=s(5863),g=s(3229);let b=l.Ry({id:l.Z_().optional(),text:l.Z_().min(1,"Option text is required"),isCorrect:l.O7()}),y=l.Ry({id:l.Z_().optional(),text:l.Z_().min(1,"Question text is required"),type:l.Km(["MULTIPLE_CHOICE","TRUE_FALSE"]),options:l.IX(b).min(2,"At least 2 options are required")}).refine(e=>1===e.options.filter(e=>e.isCorrect).length,{message:"Exactly one option must be marked as correct",path:["options"]}),N=l.Ry({title:l.Z_().min(1,"Quiz title is required"),description:l.Z_().optional(),passingScore:l.Rx().min(0).max(100),timeLimit:l.Rx().min(1).optional(),isActive:l.O7(),questions:l.IX(y).min(1,"At least 1 question is required")});function w(e){let{userId:t,quiz:s}=e,[l,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)(""),C=(0,n.useRouter)(),{register:k,control:q,handleSubmit:z,watch:_,setValue:A,formState:{errors:E}}=(0,a.cI)({resolver:(0,o.F)(N),defaultValues:{title:s.title,description:s.description||"",passingScore:s.passingScore,timeLimit:s.timeLimit||void 0,isActive:s.isActive,questions:s.questions.map(e=>({id:e.id,text:e.text,type:e.type,options:e.options.map(e=>({id:e.id,text:e.text,isCorrect:e.isCorrect}))}))}}),{fields:Z,append:R,remove:S}=(0,a.Dq)({control:q,name:"questions"}),I=_("questions"),O=e=>{var t;let s=(null===(t=I[e])||void 0===t?void 0:t.options)||[];A("questions.".concat(e,".options"),[...s,{text:"",isCorrect:!1}])},L=(e,t)=>{var s;let i=(null===(s=I[e])||void 0===s?void 0:s.options)||[];i.length>2&&A("questions.".concat(e,".options"),i.filter((e,s)=>s!==t))},F=async e=>{b(!0),w("");try{let t=await fetch("/api/quizzes/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await t.json();if(!t.ok)throw Error(i.error||"Failed to update quiz");C.push("/admin/dashboard")}catch(e){w(e instanceof Error?e.message:"An error occurred")}finally{b(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)(c.z,{variant:"ghost",onClick:()=>C.back(),className:"mr-4",children:[(0,i.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Quiz"})]})})})}),(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsxs)("form",{onSubmit:z(F),className:"space-y-8",children:[y&&(0,i.jsx)(p.bZ,{variant:"destructive",children:(0,i.jsx)(p.X,{children:y})}),(0,i.jsxs)(m.Zb,{children:[(0,i.jsxs)(m.Ol,{children:[(0,i.jsx)(m.ll,{children:"Quiz Information"}),(0,i.jsx)(m.SZ,{children:"Update basic information about your quiz"})]}),(0,i.jsxs)(m.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{htmlFor:"title",children:"Quiz Title *"}),(0,i.jsx)(d.I,{id:"title",placeholder:"Enter quiz title",...k("title")}),E.title&&(0,i.jsx)("p",{className:"text-sm text-destructive",children:E.title.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{htmlFor:"description",children:"Description"}),(0,i.jsx)(d.I,{id:"description",placeholder:"Enter quiz description (optional)",...k("description")})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{htmlFor:"passingScore",children:"Passing Score (%) *"}),(0,i.jsx)(d.I,{id:"passingScore",type:"number",min:"0",max:"100",...k("passingScore",{valueAsNumber:!0})}),E.passingScore&&(0,i.jsx)("p",{className:"text-sm text-destructive",children:E.passingScore.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{htmlFor:"timeLimit",children:"Time Limit (minutes)"}),(0,i.jsx)(d.I,{id:"timeLimit",type:"number",min:"1",placeholder:"No time limit",...k("timeLimit",{valueAsNumber:!0})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{htmlFor:"isActive",children:"Quiz Status"}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(a.Qr,{name:"isActive",control:q,render:e=>{let{field:t}=e;return(0,i.jsx)(x.X,{id:"isActive",checked:t.value,onCheckedChange:t.onChange})}}),(0,i.jsx)(u._,{htmlFor:"isActive",className:"cursor-pointer",children:"Active (visible to students)"})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Check this box to make the quiz visible to students"})]})]})]})]}),(0,i.jsxs)(m.Zb,{children:[(0,i.jsx)(m.Ol,{children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(m.ll,{children:"Questions"}),(0,i.jsx)(m.SZ,{children:"Edit questions for your quiz"})]}),(0,i.jsxs)(c.z,{type:"button",onClick:()=>{R({text:"",type:"MULTIPLE_CHOICE",options:[{text:"",isCorrect:!0},{text:"",isCorrect:!1}]})},children:[(0,i.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})}),(0,i.jsxs)(m.aY,{className:"space-y-6",children:[Z.map((e,t)=>{var s,r,n,a,o,l;return(0,i.jsxs)(m.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,i.jsx)(m.Ol,{children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)(u._,{children:["Question ",t+1," *"]}),(0,i.jsx)(d.I,{placeholder:"Enter your question",...k("questions.".concat(t,".text")),className:"mt-1"}),(null===(r=E.questions)||void 0===r?void 0:null===(s=r[t])||void 0===s?void 0:s.text)&&(0,i.jsx)("p",{className:"text-sm text-destructive mt-1",children:null===(a=E.questions[t])||void 0===a?void 0:null===(n=a.text)||void 0===n?void 0:n.message})]}),Z.length>1&&(0,i.jsx)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>S(t),className:"ml-4",children:(0,i.jsx)(v.Z,{className:"h-4 w-4"})})]})}),(0,i.jsxs)(m.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u._,{children:"Question Type"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"radio",value:"MULTIPLE_CHOICE",...k("questions.".concat(t,".type"))}),(0,i.jsx)("span",{children:"Multiple Choice"})]}),(0,i.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"radio",value:"TRUE_FALSE",...k("questions.".concat(t,".type"))}),(0,i.jsx)("span",{children:"True/False"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{children:"Options"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:'Select the "Correct Answer" radio button for the right answer'})]}),(0,i.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>O(t),children:[(0,i.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Add Option"]})]}),null===(l=I[t])||void 0===l?void 0:null===(o=l.options)||void 0===o?void 0:o.map((e,s)=>{var r,n,a,o,l;return(0,i.jsxs)("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"radio",id:"correct-".concat(t,"-").concat(s),name:"correct-".concat(t),checked:(null===(a=I[t])||void 0===a?void 0:null===(n=a.options)||void 0===n?void 0:null===(r=n[s])||void 0===r?void 0:r.isCorrect)||!1,onChange:e=>{var i;((null===(i=I[t])||void 0===i?void 0:i.options)||[]).forEach((e,i)=>{A("questions.".concat(t,".options.").concat(i,".isCorrect"),i===s)})},className:"h-4 w-4 text-green-600 focus:ring-green-500"}),(0,i.jsx)(u._,{htmlFor:"correct-".concat(t,"-").concat(s),className:"text-sm font-medium text-green-600",children:"Correct Answer"})]}),(0,i.jsx)(d.I,{placeholder:"Option ".concat(s+1),...k("questions.".concat(t,".options.").concat(s,".text")),className:"flex-1"}),(null===(l=I[t])||void 0===l?void 0:null===(o=l.options)||void 0===o?void 0:o.length)>2&&(0,i.jsx)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>L(t,s),children:(0,i.jsx)(v.Z,{className:"h-4 w-4"})})]},s)})]})]})]},e.id)}),E.questions&&(0,i.jsx)("p",{className:"text-sm text-destructive",children:E.questions.message})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,i.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>C.back(),children:"Cancel"}),(0,i.jsxs)(c.z,{type:"submit",disabled:l,children:[l&&(0,i.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),(0,i.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Update Quiz"]})]})]})})]})}},5937:function(e,t,s){"use strict";s.d(t,{X:function(){return c},bZ:function(){return l}});var i=s(7437),r=s(2265),n=s(535),a=s(3448);let o=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,i.jsx)("div",{ref:t,role:"alert",className:(0,a.cn)(o({variant:r}),s),...n})});l.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("h5",{ref:t,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",s),...r})});c.displayName="AlertDescription"},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var i=s(7437),r=s(2265),n=s(7053),a=s(535),o=s(3448);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:a,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,i.jsx)(u,{className:(0,o.cn)(l({variant:r,size:a,className:s})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return a},aY:function(){return d},ll:function(){return l}});var i=s(7437),r=s(2265),n=s(3448);let a=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});a.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},8245:function(e,t,s){"use strict";s.d(t,{X:function(){return l}});var i=s(7437),r=s(2265),n=s(9270),a=s(401),o=s(3448);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.fC,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,i.jsx)(n.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(a.Z,{className:"h-4 w-4"})})})});l.displayName=n.fC.displayName},279:function(e,t,s){"use strict";s.d(t,{I:function(){return a}});var i=s(7437),r=s(2265),n=s(3448);let a=r.forwardRef((e,t)=>{let{className:s,type:r,...a}=e;return(0,i.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});a.displayName="Input"},5060:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var i=s(7437),r=s(2265),n=s(6394),a=s(535),o=s(3448);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),s),...r})});c.displayName=n.f.displayName},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var i=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,i.W)(t))}}},function(e){e.O(0,[284,244,713,971,117,744],function(){return e(e.s=6521)}),_N_E=e.O()}]);