(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{6704:function(e,s,t){Promise.resolve().then(t.bind(t,2204))},2204:function(e,s,t){"use strict";t.d(s,{EnhancedStudentDashboard:function(){return E}});var a=t(7437),r=t(2265),l=t(9376),n=t(2381),i=t(9820),c=t(9174),o=t(7168),d=t(1769),x=t(7692),m=t(6221),u=t(3417),h=t(5805),g=t(525),b=t(9474),p=t(5302),j=t(1047),f=t(6595),N=t(3276),v=t(5131),y=t(5621),w=t(610),z=t(3448);let Z=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(w.fC,{ref:s,className:(0,z.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(w.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});Z.displayName=w.fC.displayName;var C=t(6399),k=t(3327),S=t(8896);function q(e){let{userId:s}=e,[t,l]=(0,r.useState)(null),[o,x]=(0,r.useState)(!0),[m,p]=(0,r.useState)("earned");(0,r.useEffect)(()=>{j()},[s]);let j=async()=>{try{let e=await fetch("/api/gamification/achievements?userId=".concat(s));if(e.ok){let s=await e.json();l(s)}}catch(e){console.error("Error fetching achievements:",e)}finally{x(!1)}},N=e=>{switch(e){case"STUDY_STREAK":return(0,a.jsx)(C.Z,{className:"h-5 w-5"});case"PEER_HELPER":return(0,a.jsx)(h.Z,{className:"h-5 w-5"});case"QUIZ_MASTERY":return(0,a.jsx)(d.Z,{className:"h-5 w-5"});case"STUDY_GROUP_LEADER":return(0,a.jsx)(k.Z,{className:"h-5 w-5"});case"CHAT_ENGAGEMENT":return(0,a.jsx)(u.Z,{className:"h-5 w-5"});default:return(0,a.jsx)(f.Z,{className:"h-5 w-5"})}},v=e=>{switch(e){case 1:return"bg-bronze-100 text-bronze-800 border-bronze-200";case 2:return"bg-silver-100 text-silver-800 border-silver-200";case 3:return"bg-yellow-100 text-yellow-800 border-yellow-200";case 4:return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return o?(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading achievements..."})]})}):t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.Zb,{className:"bg-gradient-to-r from-purple-500 to-blue-600 text-white",children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Your Achievements"}),(0,a.jsx)("p",{className:"text-purple-100",children:"Keep learning and earning rewards!"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold",children:t.totalPoints}),(0,a.jsx)("div",{className:"text-sm text-purple-100",children:"Total Points"})]})]})})}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[(0,a.jsxs)(n.z,{variant:"earned"===m?"default":"ghost",onClick:()=>p("earned"),className:"flex-1",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Earned (",t.achievements.length,")"]}),(0,a.jsxs)(n.z,{variant:"progress"===m?"default":"ghost",onClick:()=>p("progress"),className:"flex-1",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4 mr-2"}),"In Progress (",t.nextAchievements.length,")"]})]}),"earned"===m&&(0,a.jsx)("div",{className:"space-y-4",children:0===t.achievements.length?(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"text-center py-12",children:[(0,a.jsx)(b.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Achievements Yet"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Start participating in quizzes and discussions to earn your first achievement!"})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.achievements.map((e,s)=>(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"text-4xl",children:e.badge}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[N(e.type),(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),(0,a.jsxs)(c.C,{className:v(e.level),children:["Level ",e.level]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsx)("p",{className:"text-sm font-medium text-blue-600",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Earned: ",new Date(e.earnedAt).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[e.currentValue,"/",e.requirement]})]}),(0,a.jsx)(Z,{value:e.currentValue/e.requirement*100,className:"h-2"})]})]})]})})},s))})}),"progress"===m&&(0,a.jsx)("div",{className:"space-y-4",children:0===t.nextAchievements.length?(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"text-center py-12",children:[(0,a.jsx)(f.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All Caught Up!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You've reached the highest level in all achievement categories. Keep up the great work!"})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.nextAchievements.map((e,s)=>(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"text-4xl opacity-50",children:e.nextBadge}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[N(e.type),(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),(0,a.jsxs)(c.C,{variant:"outline",children:["Next: Level ",e.nextLevel]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsx)("p",{className:"text-sm font-medium text-purple-600",children:e.nextTitle}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[e.currentValue,"/",e.requirement]})]}),(0,a.jsx)(Z,{value:e.progress,className:"h-3"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(e.progress),"% complete"]})]}),e.progress>=80&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-green-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-green-700 font-medium",children:["\uD83C\uDF89 Almost there! Just ",e.requirement-e.currentValue," more to go!"]})})]})]})})},s))})}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),"Tips to Earn More Achievements"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 text-orange-500"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Study Streak:"})," Take quizzes daily"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-blue-500"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Peer Helper:"})," Answer questions in chat"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Quiz Mastery:"})," Score 80% or higher"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 text-purple-500"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Group Leader:"})," Participate in study groups"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-indigo-500"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Chat Engagement:"})," Join discussions"]})]})]})]})})]})]}):(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"text-center py-8",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Unable to load achievements"}),(0,a.jsx)(n.z,{onClick:j,className:"mt-4",children:"Retry"})]})})}var A=t(4766),R=t(2489),Y=t(3795);function D(e){let{userId:s,userName:t,userRole:l}=e,[o,d]=(0,r.useState)([]),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(0),{socket:g,isConnected:b}=(0,Y.s)();(0,r.useEffect)(()=>{if(g&&b)return g.on("new-announcement",e=>{let s={id:e.id,message:e.message,type:"announcement",timestamp:new Date(e.sentAt),read:!1};d(e=>[s,...e]),h(e=>e+1),"granted"===Notification.permission&&new Notification("New Announcement",{body:e.message,icon:"/favicon.ico"})}),g.on("quiz-broadcast",e=>{if("PUBLISHED"===e.type){let s={id:"quiz-".concat(e.quizId,"-").concat(Date.now()),message:e.message,type:"quiz",timestamp:new Date,read:!1};d(e=>[s,...e]),h(e=>e+1),"granted"===Notification.permission&&new Notification("New Quiz Available",{body:e.message,icon:"/favicon.ico"})}}),g.on("new-quiz-notification",e=>{let s={id:e.id,message:e.message,type:"quiz",timestamp:new Date(e.createdAt),read:!1};d(e=>[s,...e]),h(e=>e+1),"granted"===Notification.permission&&new Notification("New Quiz Available",{body:e.message,icon:"/favicon.ico"})}),()=>{g.off("new-announcement"),g.off("quiz-broadcast"),g.off("new-quiz-notification")}},[g,b]),(0,r.useEffect)(()=>{"default"===Notification.permission&&Notification.requestPermission(),p()},[]);let p=async()=>{try{let e=await fetch("/api/announcements?limit=20");if(e.ok){let s=(await e.json()).map(e=>({id:e.id,message:e.message,type:"announcement",timestamp:new Date(e.createdAt),read:!1}));d(s),h(s.length)}}catch(e){console.error("Failed to fetch notifications:",e)}},j=e=>{d(s=>s.map(s=>s.id===e?{...s,read:!0}:s)),h(e=>Math.max(0,e-1))},f=e=>{d(s=>s.filter(s=>s.id!==e)),h(s=>{let t=o.find(s=>s.id===e);return t&&!t.read?Math.max(0,s-1):s})};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>m(!x),className:"relative p-2 hover:bg-blue-50",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-blue-600"}),u>0&&(0,a.jsx)(c.C,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:u>9?"9+":u})]}),x&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-2 w-80 z-50",children:(0,a.jsxs)(i.Zb,{className:"shadow-lg border-blue-200",children:[(0,a.jsx)(i.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{className:"text-lg text-blue-800",children:"Notifications"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[u>0&&(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>{d(e=>e.map(e=>({...e,read:!0}))),h(0)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all read"}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>m(!1),className:"p-1",children:(0,a.jsx)(R.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(i.aY,{className:"p-0",children:(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===o.length?(0,a.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No notifications yet"}):o.map(e=>(0,a.jsx)("div",{className:"p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ".concat(e.read?"":"bg-blue-50 border-l-4 border-l-blue-500"),onClick:()=>j(e.id),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm ".concat(e.read?"text-gray-700":"font-semibold text-blue-900"),children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.timestamp.toLocaleString()})]}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),f(e.id)},className:"p-1 ml-2",children:(0,a.jsx)(R.Z,{className:"h-3 w-3"})})]})},e.id))})})]})})]})}function E(e){let{user:s,quizzes:t,attempts:w}=e,z=(0,l.useRouter)(),[Z,C]=(0,r.useState)(!1),[k,S]=(0,r.useState)([]),[A,R]=(0,r.useState)([]),[E,T]=(0,r.useState)([]),[Q,_]=(0,r.useState)("dashboard"),[L,P]=(0,r.useState)([]),[I,U]=(0,r.useState)(t),[O,M]=(0,r.useState)(0),[G,V]=(0,r.useState)(5),[H,J]=(0,r.useState)(0),[F,B]=(0,r.useState)([]),{socket:K,isConnected:W}=(0,Y.s)(),X=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/quizzes?role=student");if(e.ok){let s=await e.json();U(s),P(s.slice(0,3))}}catch(e){console.error("Error fetching quizzes:",e)}},[]),$=(0,r.useCallback)(()=>{if(0===w.length)return 0;let e=w.filter(e=>e.completedAt).sort((e,s)=>new Date(s.completedAt).getTime()-new Date(e.completedAt).getTime()),s=0,t=new Date;for(let a of(t.setHours(0,0,0,0),e)){let e=new Date(a.completedAt);e.setHours(0,0,0,0);let r=Math.floor((t.getTime()-e.getTime())/864e5);if(r===s)s++;else if(r>s)break}return s},[w]),ee=(0,r.useCallback)(()=>{let e=new Date;return e.setDate(e.getDate()-7),w.filter(s=>s.completedAt&&new Date(s.completedAt)>e).length},[w]),es=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/chat/rooms");if(e.ok){let s=await e.json();S(s)}}catch(e){console.error("Error fetching chat rooms:",e)}},[]),et=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/study-groups");if(e.ok){let s=await e.json();R(s)}}catch(e){console.error("Error fetching study groups:",e)}},[]),ea=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/study-milestones");if(e.ok){let s=await e.json();T(s)}}catch(e){console.error("Error fetching study milestones:",e)}},[]);(0,r.useEffect)(()=>{X(),es(),et(),ea(),M($()),J(ee())},[X,es,et,ea,$,ee]),(0,r.useEffect)(()=>{if(!K||!W)return;let e=e=>{B(s=>[e,...s.slice(0,4)])},s=s=>{console.log("New quiz notification received:",s),e({type:"quiz-created",message:"New quiz available: ".concat(s.title),timestamp:new Date}),X()},t=s=>{console.log("Quiz update received:",s),e({type:"quiz-updated",message:"Quiz updated: ".concat(s.title),timestamp:new Date}),X()};return K.on("new-quiz-notification",s),K.on("quiz-broadcast",t),()=>{K.off("new-quiz-notification",s),K.off("quiz-broadcast",t)}},[K,W,X]),(0,r.useEffect)(()=>{P(I.slice(0,3))},[I]);let er=async()=>{C(!0);try{await fetch("/api/auth/logout",{method:"POST"}),z.push("/")}catch(e){console.error("Logout error:",e)}finally{C(!1)}},el=e=>{z.push("/student/quiz/".concat(e))},en=e=>{z.push("/chat/".concat(e))},ei=()=>k.filter(e=>"QUIZ_DISCUSSION"===e.type),ec=()=>k.filter(e=>"GENERAL"===e.type),eo=(e,s)=>e>=s?"text-green-600":"text-red-600",ed=(e,s)=>e>=s?"default":"destructive";return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,a.jsx)("header",{className:"bg-white/80 backdrop-blur-sm shadow-lg border-b border-blue-100",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-2 rounded-lg mr-3",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent",children:"Student Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(D,{userId:s.id,userName:s.name,userRole:s.role}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-2 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:["Welcome, ",s.name]})]}),(0,a.jsxs)(n.z,{onClick:er,variant:"outline",size:"sm",disabled:Z,className:"flex items-center gap-2 border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),Z?"Logging out...":"Logout"]})]})]})})}),(0,a.jsxs)("div",{className:"flex h-[calc(100vh-80px)]",children:[(0,a.jsxs)("div",{className:"w-64 bg-white/70 backdrop-blur-sm border-r border-blue-100 p-4 flex flex-col",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent mb-4",children:"Navigation"}),(0,a.jsxs)("nav",{className:"space-y-2 flex-1",children:[(0,a.jsxs)(n.z,{onClick:()=>_("dashboard"),variant:"dashboard"===Q?"default":"ghost",className:"w-full justify-start ".concat("dashboard"===Q?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-blue-700 hover:bg-blue-50 hover:text-blue-800"),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),(0,a.jsxs)(n.z,{onClick:()=>_("quizzes"),variant:"quizzes"===Q?"default":"ghost",className:"w-full justify-start ".concat("quizzes"===Q?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-blue-700 hover:bg-blue-50 hover:text-blue-800"),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Quizzes"]}),(0,a.jsxs)(n.z,{onClick:()=>_("study-chat"),variant:"study-chat"===Q?"default":"ghost",className:"w-full justify-start ".concat("study-chat"===Q?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-blue-700 hover:bg-blue-50 hover:text-blue-800"),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Study Chat"]}),(0,a.jsxs)(n.z,{onClick:()=>_("study-groups"),variant:"study-groups"===Q?"default":"ghost",className:"w-full justify-start ".concat("study-groups"===Q?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-blue-700 hover:bg-blue-50 hover:text-blue-800"),children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Study Groups"]}),(0,a.jsxs)(n.z,{onClick:()=>_("progress"),variant:"progress"===Q?"default":"ghost",className:"w-full justify-start ".concat("progress"===Q?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-blue-700 hover:bg-blue-50 hover:text-blue-800"),children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Progress"]}),(0,a.jsxs)(n.z,{onClick:()=>_("achievements"),variant:"achievements"===Q?"default":"ghost",className:"w-full justify-start ".concat("achievements"===Q?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-blue-700 hover:bg-blue-50 hover:text-blue-800"),children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Achievements"]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)(o.mQ,{value:Q,onValueChange:_,className:"space-y-6",children:[(0,a.jsxs)(o.nU,{value:"dashboard",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)(i.Zb,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-blue-800",children:"Available Quizzes"}),(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-900",children:I.length}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Ready to take"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-green-800",children:"Completed"}),(0,a.jsx)(p.Z,{className:"h-5 w-5 text-green-600"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-900",children:w.length}),(0,a.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Quiz attempts"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-purple-800",children:"Average Score"}),(0,a.jsx)(g.Z,{className:"h-5 w-5 text-purple-600"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-900",children:[w.length>0?Math.round(w.reduce((e,s)=>e+s.score,0)/w.length):0,"%"]}),(0,a.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Performance"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-orange-800",children:"Study Groups"}),(0,a.jsx)(h.Z,{className:"h-5 w-5 text-orange-600"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-orange-900",children:A.length}),(0,a.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Active groups"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-blue-600"}),"Upcoming Quizzes"]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:0===L.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No upcoming quizzes"}):L.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e._count.questions," questions"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.enableChat&&e.chatRooms&&e.chatRooms.length>0&&(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>en(e.chatRooms[0].id),children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})}),(0,a.jsx)(n.z,{size:"sm",onClick:()=>el(e.id),className:"bg-blue-600 hover:bg-blue-700",children:"Start"})]})]},e.id))})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-yellow-600"}),"Recent Achievements"]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:E.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("completion"===e.type?"bg-green-100":"social"===e.type?"bg-blue-100":"bg-yellow-100"),children:"completion"===e.type?(0,a.jsx)(p.Z,{className:"h-4 w-4 text-green-600"}):"social"===e.type?(0,a.jsx)(h.Z,{className:"h-4 w-4 text-blue-600"}):(0,a.jsx)(f.Z,{className:"h-4 w-4 text-yellow-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null===(s=e.date)||void 0===s?void 0:s.toLocaleDateString()})]})]},e.id)})})]})]})]}),(0,a.jsxs)(o.nU,{value:"quizzes",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Available Quizzes"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Choose a quiz to test your knowledge and join study discussions"})]}),0===I.length?(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"text-center py-16",children:[(0,a.jsx)(d.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No quizzes available"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Check back later for new quizzes from your instructors"})]})}):(0,a.jsx)("div",{className:"grid gap-6",children:I.map(e=>(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-3 text-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-white"})}),e.title,e.enableChat&&(0,a.jsxs)(c.C,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Chat Available"]})]}),(0,a.jsx)(i.SZ,{className:"mt-2",children:e.description||"Test your knowledge with this quiz"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Created by ",e.creator.name]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[e.enableChat&&e.chatRooms&&e.chatRooms.length>0&&(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>en(e.chatRooms[0].id),className:"border-green-200 text-green-700 hover:bg-green-50",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Study Chat"]}),(0,a.jsxs)(n.z,{onClick:()=>el(e.id),disabled:!e.isActive,className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Start Quiz"]})]})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e._count.questions}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Questions"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[e.passingScore,"%"]}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Pass Score"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.timeLimit?"".concat(e.timeLimit):"∞"}),(0,a.jsx)("div",{className:"text-sm text-orange-700",children:e.timeLimit?"Minutes":"No Limit"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e._count.attempts}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Attempts"})]})]})})]},e.id))})]}),(0,a.jsxs)(o.nU,{value:"study-chat",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Study Chat Rooms"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Join quiz discussions and general study rooms"})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"}),"Quiz Discussion Rooms"]}),ei().length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ei().map(e=>{var s;return(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer border-l-4 border-l-blue-500",onClick:()=>en(e.id),children:[(0,a.jsxs)(i.Ol,{className:"pb-3",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-blue-600"}),e.name]}),(0,a.jsx)(i.SZ,{className:"text-sm",children:e.quiz?"Quiz: ".concat(e.quiz.title):"Quiz Discussion"})]}),(0,a.jsxs)(i.aY,{className:"pt-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c.C,{className:"bg-blue-100 text-blue-800",children:"Quiz Discussion"}),(0,a.jsx)(n.z,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"Join Chat"})]}),(null===(s=e._count)||void 0===s?void 0:s.messages)&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[e._count.messages," messages"]})]})]},e.id)})}):(0,a.jsx)(i.Zb,{className:"border-dashed border-2 border-gray-200",children:(0,a.jsxs)(i.aY,{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Quiz Chat Rooms"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Quiz chat rooms will appear here when instructors create quizzes with chat enabled"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-green-600"}),"General Study Rooms"]}),ec().length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ec().map(e=>{var s;return(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer border-l-4 border-l-green-500",onClick:()=>en(e.id),children:[(0,a.jsxs)(i.Ol,{className:"pb-3",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}),e.name]}),(0,a.jsx)(i.SZ,{className:"text-sm",children:"General study discussion"})]}),(0,a.jsxs)(i.aY,{className:"pt-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"General Study"}),(0,a.jsx)(n.z,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Join Chat"})]}),(null===(s=e._count)||void 0===s?void 0:s.messages)&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[e._count.messages," messages"]})]})]},e.id)})}):(0,a.jsx)(i.Zb,{className:"border-dashed border-2 border-gray-200",children:(0,a.jsxs)(i.aY,{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No General Chat Rooms"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"General study rooms will appear here when created by instructors"})]})})]}),0===ei().length&&0===ec().length&&(0,a.jsx)(i.Zb,{className:"mt-8",children:(0,a.jsxs)(i.aY,{className:"text-center py-16",children:[(0,a.jsx)(u.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No chat rooms available"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Chat rooms will appear here when quizzes with chat are created"})]})})]}),(0,a.jsxs)(o.nU,{value:"study-groups",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-700 to-indigo-700 bg-clip-text text-transparent",children:"My Study Groups"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Collaborate with peers in your assigned study groups and participate in discussions"})]}),(0,a.jsx)("div",{className:"grid gap-6",children:A.map(e=>(0,a.jsxs)(i.Zb,{className:"border-l-4 border-l-purple-500 hover:shadow-lg transition-all duration-300",children:[(0,a.jsx)(i.Ol,{className:"bg-gradient-to-r from-purple-50 to-indigo-50",children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-3 text-lg",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-white"})}),e.name,(0,a.jsx)(c.C,{className:"bg-purple-100 text-purple-800",children:"Member"})]}),(0,a.jsx)(i.SZ,{className:"mt-2 text-gray-700",children:e.description||"Collaborative learning group for enhanced study experience"})]})})}),(0,a.jsxs)(i.aY,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.members.length}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Members"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.chatRooms&&e.chatRooms.length>0?"✓":"✗"}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Chat Room"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Status"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex -space-x-2",children:[e.members.slice(0,4).map((e,s)=>(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center text-white text-xs font-medium border-2 border-white",title:e.user.name,children:e.user.name.charAt(0).toUpperCase()},s)),e.members.length>4&&(0,a.jsxs)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 text-xs font-medium border-2 border-white",children:["+",e.members.length-4]})]}),e.chatRooms&&e.chatRooms.length>0&&(0,a.jsxs)(c.C,{className:"bg-green-100 text-green-800",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Discussion Active"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[e.chatRooms&&e.chatRooms.length>0&&(0,a.jsxs)(n.z,{size:"sm",onClick:()=>en(e.chatRooms[0].id),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Join Discussion"]}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"View Members"]})]})]})]})]},e.id))}),0===A.length&&(0,a.jsx)(i.Zb,{className:"border-2 border-dashed border-gray-200",children:(0,a.jsxs)(i.aY,{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(h.Z,{className:"h-10 w-10 text-purple-500"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Study Groups Assigned"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't been added to any study groups yet. Study groups will appear here when your instructor assigns you to one."}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Tip:"})," Study groups help you collaborate with classmates, share knowledge, and participate in group discussions about quiz topics."]})})]})})]}),(0,a.jsxs)(o.nU,{value:"progress",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Progress"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your learning journey and achievements"})]}),w.length>0&&(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Quiz History"})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:w.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.passed?(0,a.jsx)(p.Z,{className:"h-8 w-8 text-green-600"}):(0,a.jsx)(v.Z,{className:"h-8 w-8 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.quiz.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.completedAt||e.startedAt).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-xl font-bold ".concat(eo(e.score,e.quiz.passingScore)),children:[e.score,"%"]}),(0,a.jsx)(c.C,{variant:ed(e.score,e.quiz.passingScore),children:e.passed?"Passed":"Failed"})]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>z.push("/student/quiz/".concat(e.quizId,"/results")),children:"View Details"})]})]},e.id))})})]}),0===w.length&&(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"text-center py-16",children:[(0,a.jsx)(y.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No quiz attempts yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Start taking quizzes to track your progress"}),(0,a.jsxs)(n.z,{onClick:()=>_("quizzes"),className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Take Your First Quiz"]})]})})]}),(0,a.jsxs)(o.nU,{value:"achievements",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"Your Achievements"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your progress and unlock new badges through active participation"})]}),(0,a.jsx)(q,{userId:s.id})]})]})})})]})]})}},9174:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var a=t(7437);t(2265);var r=t(535),l=t(3448);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:t}),s),...r})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var a=t(7437),r=t(2265),l=t(7053),n=t(535),i=t(3448);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:o=!1,...d}=e,x=o?l.g7:"button";return(0,a.jsx)(x,{className:(0,i.cn)(c({variant:r,size:n,className:t})),ref:s,...d})});o.displayName="Button"},9820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var a=t(7437),r=t(2265),l=t(3448);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},7168:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var a=t(7437),r=t(2265),l=t(271),n=t(3448);let i=l.fC,c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});c.displayName=l.aV.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});o.displayName=l.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});d.displayName=l.VY.displayName},3795:function(e,s,t){"use strict";t.d(s,{s:function(){return c}});var a=t(2265),r=t(8680),l=t(257);let n=null,i=0;function c(e){let[s,t]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),[d,x]=(0,a.useState)([]),m=(0,a.useRef)(),u=(0,a.useRef)(0),h=(0,a.useCallback)(()=>{if(n&&n.connected){t(n),o(!0);return}if(n&&!n.connected&&!1===n.disconnected){t(n);return}n||(console.log("Creating new WebSocket connection"),(n=(0,r.io)(l.env.NEXT_PUBLIC_SOCKET_URL||window.location.origin,{path:"/api/socketio",transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:2e4,forceNew:!1,reconnection:!1})).on("connect",()=>{console.log("Connected to server"),u.current=0,o(!0),m.current&&clearTimeout(m.current)}),n.on("disconnect",e=>{if(console.log("Disconnected from server:",e),o(!1),("io server disconnect"===e||"transport close"===e)&&u.current<5){let e=1e3*Math.pow(2,u.current);m.current=setTimeout(()=>{console.log("Attempting to reconnect... (".concat(u.current+1,"/").concat(5,")")),u.current++,n&&n.connect()},e)}else u.current>=5&&console.log("Max reconnection attempts reached. Stopping reconnection.")}),n.on("connect_error",e=>{console.error("Connection error:",e),o(!1)})),t(n)},[]);(0,a.useEffect)(()=>(i++,h(),()=>{i--,m.current&&clearTimeout(m.current),0===i&&n&&(console.log("Closing global WebSocket connection"),n.close(),n=null)}),[]);let g=(0,a.useCallback)((e,t)=>{s&&s.on(e,t)},[s]),b=(0,a.useCallback)((e,t)=>{s&&(t?s.off(e,t):s.off(e))},[s]),p=(0,a.useCallback)((t,a)=>{s&&c&&s.emit("join-study-session",{sessionId:t,userId:a||(null==e?void 0:e.userId)})},[s,c,null==e?void 0:e.userId]),j=(0,a.useCallback)((t,a)=>{s&&c&&s.emit("leave-study-session",{sessionId:t,userId:a||(null==e?void 0:e.userId)})},[s,c,null==e?void 0:e.userId]),f=(0,a.useCallback)((t,a,r,l)=>{s&&c&&s.emit("study-session-update",{sessionId:t,updateType:a,content:r,userId:l||(null==e?void 0:e.userId)})},[s,c,null==e?void 0:e.userId]);return{socket:s,isConnected:c,connect:h,on:g,off:b,joinStudySession:p,leaveStudySession:j,sendStudySessionUpdate:f,recentAnnouncements:d}}},3448:function(e,s,t){"use strict";t.d(s,{cn:function(){return l}});var a=t(1994),r=t(3335);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[284,265,829,433,971,117,744],function(){return e(e.s=6704)}),_N_E=e.O()}]);