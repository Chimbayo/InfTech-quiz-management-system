exports.id=5463,exports.ids=[5463],exports.modules={9856:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},9030:()=>{},25023:(e,s,r)=>{"use strict";r.d(s,{N:()=>f});var t=r(10326),a=r(17577),i=r(40617),n=r(45091),l=r(62783),d=r(24061),o=r(69436),c=r(91664),u=r(41190),m=r(38443);function f({roomId:e,userId:s}){let[r,f]=(0,a.useState)([]),[x,g]=(0,a.useState)(""),[b,v]=(0,a.useState)(!0),[h,p]=(0,a.useState)(!1),[y,N]=(0,a.useState)(null),j=(0,a.useRef)(null),w=async()=>{if(e)try{let s=await fetch(`/api/chat/rooms/${e}/messages`);if(s.ok){let e=await s.json();f(Array.isArray(e)?e:e.messages||[]),v(!0)}else v(!1)}catch(e){console.error("Error fetching messages:",e),v(!1)}},C=async()=>{if(x.trim()&&e&&!h){p(!0);try{(await fetch(`/api/chat/rooms/${e}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:x.trim()})})).ok?(g(""),await w()):console.error("Failed to send message")}catch(e){console.error("Error sending message:",e)}finally{p(!1)}}};return e?(0,t.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50 rounded-t-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(i.Z,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:y?.name||"Loading..."}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[b?(0,t.jsxs)("div",{className:"flex items-center text-green-600",children:[t.jsx(n.Z,{className:"h-3 w-3 mr-1"}),t.jsx("span",{className:"text-xs",children:"Connected"})]}):(0,t.jsxs)("div",{className:"flex items-center text-red-600",children:[t.jsx(l.Z,{className:"h-3 w-3 mr-1"}),t.jsx("span",{className:"text-xs",children:"Disconnected"})]}),y&&t.jsx(m.C,{variant:"secondary",className:"text-xs",children:"QUIZ_DISCUSSION"===y.type?"Quiz Chat":"General"})]})]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)(m.C,{variant:"outline",className:"text-xs",children:[t.jsx(d.Z,{className:"h-3 w-3 mr-1"}),y?._count?.messages||0," messages"]})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===r.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(i.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No messages yet. Start the conversation!"})]}):r.map(e=>t.jsx("div",{className:`flex ${e.user.id===s?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${e.user.id===s?"bg-blue-600 text-white":e.isSystemMessage?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-gray-100 text-gray-900"}`,children:[e.user.id!==s&&!e.isSystemMessage&&(0,t.jsxs)("div",{className:"text-xs font-medium mb-1 text-gray-600",children:[e.user.name,"ADMIN"===e.user.role&&t.jsx(m.C,{variant:"secondary",className:"ml-1 text-xs",children:"Admin"}),"TEACHER"===e.user.role&&t.jsx(m.C,{variant:"secondary",className:"ml-1 text-xs",children:"Teacher"})]}),t.jsx("div",{className:"break-words",children:e.message}),t.jsx("div",{className:`text-xs mt-1 ${e.user.id===s?"text-blue-100":"text-gray-500"}`,children:new Date(e.createdAt).toLocaleTimeString()})]})},e.id)),t.jsx("div",{ref:j})]}),(0,t.jsxs)("div",{className:"p-4 border-t bg-gray-50 rounded-b-lg",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(u.I,{value:x,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C())},placeholder:"Type your message...",disabled:h||!b,className:"flex-1"}),t.jsx(c.z,{onClick:C,disabled:!x.trim()||h||!b,className:"bg-blue-600 hover:bg-blue-700",children:h?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(o.Z,{className:"h-4 w-4"})})]}),!b&&t.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Connection lost. Trying to reconnect..."})]})]}):t.jsx("div",{className:"flex items-center justify-center h-full bg-white rounded-lg border",children:(0,t.jsxs)("div",{className:"text-center p-8",children:[t.jsx(i.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select a Chat Room"}),t.jsx("p",{className:"text-gray-600",children:"Choose a room from the sidebar to start chatting"})]})})}},33261:(e,s,r)=>{"use strict";r.d(s,{X:()=>o,bZ:()=>d});var t=r(10326),a=r(17577),i=r(79360),n=r(51223);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef(({className:e,variant:s,...r},a)=>t.jsx("div",{ref:a,role:"alert",className:(0,n.cn)(l({variant:s}),e),...r}));d.displayName="Alert",a.forwardRef(({className:e,...s},r)=>t.jsx("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let o=a.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},38443:(e,s,r)=>{"use strict";r.d(s,{C:()=>l});var t=r(10326);r(17577);var a=r(79360),i=r(51223);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...r}){return t.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...r})}},91664:(e,s,r)=>{"use strict";r.d(s,{z:()=>o});var t=r(10326),a=r(17577),i=r(34214),n=r(79360),l=r(51223);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...n},o)=>{let c=a?i.g7:"button";return t.jsx(c,{className:(0,l.cn)(d({variant:s,size:r,className:e})),ref:o,...n})});o.displayName="Button"},29752:(e,s,r)=>{"use strict";r.d(s,{Ol:()=>l,SZ:()=>o,Zb:()=>n,aY:()=>c,ll:()=>d});var t=r(10326),a=r(17577),i=r(51223);let n=a.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let l=a.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...s},r)=>t.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...s},r)=>t.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",a.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},9280:(e,s,r)=>{"use strict";r.d(s,{X:()=>d});var t=r(10326),a=r(17577),i=r(13635),n=r(32933),l=r(51223);let d=a.forwardRef(({className:e,...s},r)=>t.jsx(i.fC,{ref:r,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:t.jsx(n.Z,{className:"h-4 w-4"})})}));d.displayName=i.fC.displayName},41190:(e,s,r)=>{"use strict";r.d(s,{I:()=>n});var t=r(10326),a=r(17577),i=r(51223);let n=a.forwardRef(({className:e,type:s,...r},a)=>t.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));n.displayName="Input"},44794:(e,s,r)=>{"use strict";r.d(s,{_:()=>o});var t=r(10326),a=r(17577),i=r(34478),n=r(79360),l=r(51223);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...s},r)=>t.jsx(i.f,{ref:r,className:(0,l.cn)(d(),e),...s}));o.displayName=i.f.displayName},3282:(e,s,r)=>{"use strict";r.d(s,{E:()=>d,m:()=>o});var t=r(10326),a=r(17577),i=r(18623),n=r(53982),l=r(51223);let d=a.forwardRef(({className:e,...s},r)=>t.jsx(i.fC,{className:(0,l.cn)("grid gap-2",e),...s,ref:r}));d.displayName=i.fC.displayName;let o=a.forwardRef(({className:e,...s},r)=>t.jsx(i.ck,{ref:r,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:t.jsx(i.z$,{className:"flex items-center justify-center",children:t.jsx(n.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));o.displayName=i.ck.displayName},51223:(e,s,r)=>{"use strict";r.d(s,{cn:()=>i});var t=r(41135),a=r(31009);function i(...e){return(0,a.m6)((0,t.W)(e))}},32029:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l,metadata:()=>n});var t=r(19510),a=r(25384),i=r.n(a);r(5023);let n={title:"Quiz Management System",description:"A comprehensive quiz management system for admins and students"};function l({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:`${i().className} bg-professional-gradient`,children:t.jsx("div",{className:"min-h-screen",children:e})})})}},95456:(e,s,r)=>{"use strict";r.d(s,{Gg:()=>a,MH:()=>n});var t=r(71615);async function a(){try{let e=(0,t.cookies)().get("user-session");if(!e||!e.value||""===e.value.trim())return null;let s=JSON.parse(e.value);if(!s||!s.id||!s.email||!s.name||!s.role)return console.warn("Invalid session structure:",s),null;return s}catch(e){return console.error("Error getting session:",e),null}}async function i(){let e=await a();if(!e)throw Error("Authentication required");return e}async function n(e){let s=await i();if(s.role!==e)throw Error(`Access denied. Required role: ${e}`);return s}},13538:(e,s,r)=>{"use strict";r.d(s,{_:()=>a});var t=r(53524);let a=globalThis.prisma??new t.PrismaClient},5023:()=>{}};