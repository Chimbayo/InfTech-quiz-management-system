(()=>{var e={};e.id=4937,e.ids=[4937],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},54519:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(75499),r(32029),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["admin",{children:["chat",{children:["moderation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75499)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\admin\\chat\\moderation\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\admin\\chat\\moderation\\page.tsx"],u="/admin/chat/moderation/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/chat/moderation/page",pathname:"/admin/chat/moderation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9856:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},9030:()=>{},6795:(e,t,r)=>{Promise.resolve().then(r.bind(r,17632))},37202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},54659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},12714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},40617:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},17632:(e,t,r)=>{"use strict";r.d(t,{MessageModerationDashboard:()=>j});var s=r(10326),a=r(17577),n=r(35047),i=r(91664),l=r(29752),o=r(38443),c=r(86333),d=r(37202),u=r(40617),m=r(98091),x=r(48998),f=r(54659),h=r(76557);let g=(0,h.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),p=(0,h.Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var y=r(12714);function j({user:e,flaggedMessages:t,recentMessages:r,stats:h}){let j=(0,n.useRouter)(),[v,b]=(0,a.useState)(null),[N,w]=(0,a.useState)(null),R=async e=>{if(confirm("Are you sure you want to delete this message? This action cannot be undone.")){w(e);try{(await fetch(`/api/chat/messages/${e}`,{method:"DELETE"})).ok?j.refresh():alert("Failed to delete message")}catch(e){console.error("Delete error:",e),alert("Failed to delete message")}finally{w(null)}}},M=async e=>{w(e);try{(await fetch(`/api/chat/messages/${e}/unflag`,{method:"POST"})).ok?j.refresh():alert("Failed to unflag message")}catch(e){console.error("Unflag error:",e),alert("Failed to unflag message")}finally{w(null)}},k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800";case"TEACHER":return"bg-blue-100 text-blue-800";case"STUDENT":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},P=e=>{switch(e){case"QUIZ":return"bg-blue-100 text-blue-800";case"STUDY":return"bg-green-100 text-green-800";case"GENERAL":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return(0,s.jsxs)("div",{className:"min-h-screen",children:[s.jsx("header",{className:"header-professional sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>j.push("/admin/chat"),className:"btn-secondary-professional",children:[s.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Back to Chat Management"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-red-600 to-red-700 rounded-lg flex items-center justify-center",children:s.jsx(d.Z,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Message Moderation"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Review and manage flagged content"})]})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"hidden sm:block text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500",children:"Administrator"})]})})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)(l.Zb,{className:"card-professional card-professional-hover",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(l.ll,{className:"text-sm font-medium text-gray-600",children:"Flagged Messages"}),s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:s.jsx(d.Z,{className:"h-5 w-5 text-red-600"})})]}),(0,s.jsxs)(l.aY,{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:h.totalFlagged}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Need review"})]})]}),(0,s.jsxs)(l.Zb,{className:"card-professional card-professional-hover",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(l.ll,{className:"text-sm font-medium text-gray-600",children:"Total Messages"}),s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(u.Z,{className:"h-5 w-5 text-blue-600"})})]}),(0,s.jsxs)(l.aY,{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:h.totalMessages}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All messages"})]})]}),(0,s.jsxs)(l.Zb,{className:"card-professional card-professional-hover",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(l.ll,{className:"text-sm font-medium text-gray-600",children:"Deleted Messages"}),s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(m.Z,{className:"h-5 w-5 text-orange-600"})})]}),(0,s.jsxs)(l.aY,{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:h.totalDeleted}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Removed content"})]})]}),(0,s.jsxs)(l.Zb,{className:"card-professional card-professional-hover",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(l.ll,{className:"text-sm font-medium text-gray-600",children:"Flagged Today"}),s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(x.Z,{className:"h-5 w-5 text-purple-600"})})]}),(0,s.jsxs)(l.aY,{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:h.flaggedToday}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recent flags"})]})]})]}),(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Flagged Messages"}),0===t.length?s.jsx(l.Zb,{className:"card-professional",children:(0,s.jsxs)(l.aY,{className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(f.Z,{className:"h-10 w-10 text-green-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No flagged messages"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"All messages are currently clean. The system will automatically flag suspicious content for review."})]})}):s.jsx("div",{className:"space-y-4",children:t.map(e=>(0,s.jsxs)(l.Zb,{className:"card-professional",children:[s.jsx(l.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsxs)(o.C,{variant:"destructive",children:[s.jsx(d.Z,{className:"h-3 w-3 mr-1"}),"Flagged"]}),(0,s.jsxs)(o.C,{variant:"default",className:_(e.user.role),children:[s.jsx(g,{className:"h-3 w-3 mr-1"}),e.user.role]}),(0,s.jsxs)(o.C,{variant:"default",className:P(e.chatRoom.type),children:[s.jsx(p,{className:"h-3 w-3 mr-1"}),e.chatRoom.type]})]}),(0,s.jsxs)(l.ll,{className:"text-lg",children:["Message from ",e.user.name]}),(0,s.jsxs)(l.SZ,{children:["In ",e.chatRoom.name,e.chatRoom.quiz&&` (Quiz: ${e.chatRoom.quiz.title})`," â€¢ ",k(e.createdAt)]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>j.push(`/admin/chat/rooms/${e.chatRoom.id}`),className:"btn-secondary-professional",children:[s.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"View Room"]}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>M(e.id),disabled:N===e.id,className:"text-green-600 hover:text-green-700",children:[s.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Approve"]}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>R(e.id),disabled:N===e.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}),(0,s.jsxs)(l.aY,{children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-red-500",children:[s.jsx("p",{className:"text-gray-900 font-medium",children:"Message Content:"}),s.jsx("p",{className:"text-gray-700 mt-2",children:e.content})]}),e.flaggedReason&&s.jsx("div",{className:"mt-4 bg-red-50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-red-800 text-sm",children:[s.jsx("strong",{children:"Flagged Reason:"})," ",e.flaggedReason]})}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"User:"})," ",e.user.name," (",e.user.email,")"]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Room:"})," ",e.chatRoom.name," (",e.chatRoom.type,")"]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Time:"})," ",k(e.createdAt)]})]})]})]},e.id))})]}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Message Activity"}),s.jsx(l.Zb,{className:"card-professional",children:s.jsx(l.aY,{className:"p-6",children:s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:r.slice(0,20).map(e=>s.jsx("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium text-sm",children:e.user.name}),s.jsx(o.C,{variant:"secondary",className:_(e.user.role),children:e.user.role}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["in ",e.chatRoom.name]}),s.jsx("span",{className:"text-xs text-gray-400",children:k(e.createdAt)})]}),s.jsx("p",{className:"text-sm text-gray-700",children:e.content})]})},e.id))})})})]})]})]})}},38443:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var s=r(10326);r(17577);var a=r(79360),n=r(51223);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return s.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},91664:(e,t,r)=>{"use strict";r.d(t,{z:()=>c});var s=r(10326),a=r(17577),n=r(34214),i=r(79360),l=r(51223);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},c)=>{let d=a?n.g7:"button";return s.jsx(d,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:c,...i})});c.displayName="Button"},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>i,aY:()=>d,ll:()=>o});var s=r(10326),a=r(17577),n=r(51223);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},51223:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(41135),a=r(31009);function n(...e){return(0,a.m6)((0,s.W)(e))}},58585:(e,t,r)=>{"use strict";var s=r(61085);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}})},61085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return i},RedirectType:function(){return s.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(83953),a=r(16399);class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return x},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return d},redirect:function(){return c}});let a=r(54580),n=r(72934),i=r(8586),l="NEXT_REDIRECT";function o(e,t,r){void 0===r&&(r=i.RedirectStatusCode.TemporaryRedirect);let s=Error(l);s.digest=l+";"+t+";"+e+";"+r+";";let n=a.requestAsyncStorage.getStore();return n&&(s.mutableCookies=n.mutableCookies),s}function c(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw o(e,t,(null==r?void 0:r.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw o(e,t,(null==r?void 0:r.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,a]=e.digest.split(";",4),n=Number(a);return t===l&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(n)&&n in i.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function x(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},75499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(19510),a=r(58585),n=r(95456),i=r(13538);let l=(0,r(68570).createProxy)(String.raw`C:\Users\HP\Documents\InfTech-quiz-management-system\src\components\admin\message-moderation-dashboard.tsx#MessageModerationDashboard`);async function o(){try{let e=await (0,n.MH)("ADMIN"),t=(await i._.chatMessage.findMany({where:{isFlagged:!0,isDeleted:!1},include:{user:{select:{id:!0,name:!0,email:!0,role:!0}},room:{select:{id:!0,name:!0,type:!0,quiz:{select:{id:!0,title:!0}}}}},orderBy:{createdAt:"desc"}})).map(e=>({id:e.id,content:e.content,createdAt:e.createdAt,isFlagged:e.isFlagged,flaggedReason:e.flaggedReason,user:e.user,chatRoom:e.room})),r=(await i._.chatMessage.findMany({where:{isDeleted:!1},include:{user:{select:{id:!0,name:!0,role:!0}},room:{select:{id:!0,name:!0,type:!0}}},orderBy:{createdAt:"desc"},take:100})).map(e=>({id:e.id,content:e.content,createdAt:e.createdAt,user:e.user,chatRoom:e.room})),a={totalFlagged:t.length,totalMessages:await i._.chatMessage.count({where:{isDeleted:!1}}),totalDeleted:await i._.chatMessage.count({where:{isDeleted:!0}}),flaggedToday:await i._.chatMessage.count({where:{isFlagged:!0,createdAt:{gte:new Date(new Date().setHours(0,0,0,0))}}})};return s.jsx(l,{user:e,flaggedMessages:t,recentMessages:r,stats:a})}catch(e){console.error("Authentication error in message moderation:",e),(0,a.redirect)("/admin")}}},32029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(19510),a=r(25384),n=r.n(a);r(5023);let i={title:"Quiz Management System",description:"A comprehensive quiz management system for admins and students"};function l({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:`${n().className} bg-professional-gradient`,children:s.jsx("div",{className:"min-h-screen",children:e})})})}},95456:(e,t,r)=>{"use strict";r.d(t,{Gg:()=>a,MH:()=>i});var s=r(71615);async function a(){try{let e=(0,s.cookies)().get("user-session");if(!e||!e.value||""===e.value.trim())return null;let t=JSON.parse(e.value);if(!t||!t.id||!t.email||!t.name||!t.role)return console.warn("Invalid session structure:",t),null;return t}catch(e){return console.error("Error getting session:",e),null}}async function n(){let e=await a();if(!e)throw Error("Authentication required");return e}async function i(e){let t=await n();if(t.role!==e)throw Error(`Access denied. Required role: ${e}`);return t}},13538:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var s=r(53524);let a=globalThis.prisma??new s.PrismaClient},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,1615,349,9735],()=>r(54519));module.exports=s})();