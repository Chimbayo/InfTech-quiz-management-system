(()=>{var e={};e.id=3425,e.ids=[3425],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19073:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o}),t(92814),t(32029),t(35866);var r=t(23191),a=t(88716),n=t(37922),i=t.n(n),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["admin",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,92814)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\admin\\chat\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\admin\\chat\\page.tsx"],u="/admin/chat/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/chat/page",pathname:"/admin/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9856:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},9030:()=>{},89931:(e,s,t)=>{Promise.resolve().then(t.bind(t,3267))},54659:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},88307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3267:(e,s,t)=>{"use strict";t.d(s,{ChatManagement:()=>y});var r=t(10326),a=t(17577),n=t(91664),i=t(29752),l=t(38443),c=t(41190),o=t(44794),d=t(50384),u=t(40617),m=t(48998),x=t(17069),h=t(37202),f=t(54659),p=t(76464),v=t(58038),g=t(12714),j=t(88307);function y(){let[e,s]=(0,a.useState)(null),[t,y]=(0,a.useState)([]),[b,N]=(0,a.useState)([]),[w,C]=(0,a.useState)(!0),[S,R]=(0,a.useState)(""),[I,A]=(0,a.useState)(""),Z=async()=>{try{C(!0);let e=await fetch("/api/chat/rooms");if(e.ok){let s=await e.json();y(s.rooms||[])}let r=await fetch("/api/chat/monitor");if(r.ok){let e=await r.json();N(e.activities||[])}let a=t.length,n=t.filter(e=>e.isActive).length,i=t.reduce((e,s)=>e+s._count.messages,0),l=b.length,c=b.filter(e=>"HIGH"===e.severity).length;s({totalRooms:a,activeRooms:n,totalMessages:i,suspiciousActivities:l,highRiskActivities:c})}catch(e){console.error("Error loading chat management data:",e)}finally{C(!1)}},P=e=>{switch(e){case"HIGH":return"destructive";case"MEDIUM":return"secondary";default:return"outline"}},k=e=>{switch(e){case"KEYWORD_MATCH":return r.jsx(u.Z,{className:"h-4 w-4"});case"TIMING_VIOLATION":return r.jsx(m.Z,{className:"h-4 w-4"});case"EXCESSIVE_MESSAGING":return r.jsx(x.Z,{className:"h-4 w-4"});default:return r.jsx(h.Z,{className:"h-4 w-4"})}},M=b.filter(e=>{let s=e.user.name.toLowerCase().includes(S.toLowerCase())||e.room.name.toLowerCase().includes(S.toLowerCase())||e.description.toLowerCase().includes(S.toLowerCase()),t=!I||e.severity===I;return s&&t});return w?r.jsx("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading chat management data..."})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Chat Participation"}),r.jsx("p",{className:"text-gray-600",children:"Join chat discussions and monitor academic integrity"})]}),(0,r.jsxs)(n.z,{onClick:Z,variant:"outline",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})]}),e&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(u.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:e.totalRooms}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Rooms"})]})]})})}),r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(f.Z,{className:"h-8 w-8 text-green-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:e.activeRooms}),r.jsx("p",{className:"text-sm text-gray-600",children:"Active Rooms"})]})]})})}),r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-8 w-8 text-purple-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:e.totalMessages}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Messages"})]})]})})}),r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.Z,{className:"h-8 w-8 text-yellow-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:e.suspiciousActivities}),r.jsx("p",{className:"text-sm text-gray-600",children:"Flagged Activities"})]})]})})}),r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(v.Z,{className:"h-8 w-8 text-red-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:e.highRiskActivities}),r.jsx("p",{className:"text-sm text-gray-600",children:"High Risk"})]})]})})})]}),(0,r.jsxs)(d.mQ,{defaultValue:"rooms",className:"space-y-4",children:[(0,r.jsxs)(d.dr,{children:[r.jsx(d.SP,{value:"rooms",children:"Chat Rooms"}),r.jsx(d.SP,{value:"integrity",children:"Academic Integrity"}),r.jsx(d.SP,{value:"analytics",children:"Analytics"})]}),r.jsx(d.nU,{value:"rooms",className:"space-y-4",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[r.jsx(i.ll,{children:"Available Chat Rooms"}),r.jsx(i.SZ,{children:"Join discussions in quiz and study group chat rooms"})]}),r.jsx(i.aY,{children:r.jsx("div",{className:"space-y-4",children:0===t.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(u.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),r.jsx("p",{children:"No chat rooms available"}),r.jsx("p",{className:"text-sm",children:"Chat rooms are automatically created when quizzes with chat are published"})]}):t.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(u.Z,{className:"h-5 w-5 text-blue-600"}),r.jsx("h3",{className:"font-medium",children:e.name}),r.jsx(l.C,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"}),r.jsx(l.C,{variant:"outline",className:"QUIZ_DISCUSSION"===e.type?"border-blue-200 text-blue-700":"STUDY_GROUP"===e.type?"border-purple-200 text-purple-700":"border-green-200 text-green-700",children:"QUIZ_DISCUSSION"===e.type?"Quiz Discussion":"STUDY_GROUP"===e.type?"Study Group":"General"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[e._count.messages," messages • Created ",new Date(e.createdAt).toLocaleDateString(),e.quiz&&` • Quiz: ${e.quiz.title}`,e.studyGroup&&` • Study Group: ${e.studyGroup.name}`]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[e.isActive&&(0,r.jsxs)(n.z,{variant:"default",size:"sm",onClick:()=>window.open(`/chat/${e.id}`,"_blank"),className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Join Chat"]}),(0,r.jsxs)(n.z,{variant:"outline",size:"sm",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Monitor"]})]})]},e.id))})})]})}),r.jsx(d.nU,{value:"integrity",className:"space-y-4",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[r.jsx(i.ll,{children:"Academic Integrity Monitoring"}),r.jsx(i.SZ,{children:"Review flagged activities and potential academic integrity violations"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx(o._,{htmlFor:"search",children:"Search"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(j.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),r.jsx(c.I,{id:"search",placeholder:"Search by user, room, or description...",value:S,onChange:e=>R(e.target.value),className:"pl-10"})]})]}),(0,r.jsxs)("div",{children:[r.jsx(o._,{htmlFor:"severity",children:"Severity"}),(0,r.jsxs)("select",{id:"severity",value:I,onChange:e=>A(e.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"LOW",children:"Low"})]})]})]}),r.jsx("div",{className:"space-y-4",children:0===M.length?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No suspicious activities found matching your criteria."}):M.map(e=>r.jsx("div",{className:"border rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[k(e.type),r.jsx("span",{className:"font-medium",children:e.description}),r.jsx(l.C,{variant:P(e.severity),children:e.severity})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{children:["User: ",e.user.name," (",e.user.email,")"]}),(0,r.jsxs)("p",{children:["Room: ",e.room.name," (",e.room.type,")"]}),(0,r.jsxs)("p",{children:["Time: ",new Date(e.timestamp).toLocaleString()]}),e.message&&(0,r.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded border-l-4 border-yellow-400",children:[r.jsx("p",{className:"text-sm font-medium",children:"Flagged Message:"}),r.jsx("p",{className:"text-sm",children:e.message.message})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(n.z,{variant:"outline",size:"sm",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Review"]}),(0,r.jsxs)(n.z,{variant:"outline",size:"sm",children:[r.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Resolve"]})]})]})},e.id))})]})]})}),r.jsx(d.nU,{value:"analytics",className:"space-y-4",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[r.jsx(i.ll,{children:"Chat Analytics"}),r.jsx(i.SZ,{children:"Insights and trends from chat activity"})]}),r.jsx(i.aY,{children:(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(p.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),r.jsx("p",{children:"Analytics dashboard coming soon"}),r.jsx("p",{className:"text-sm",children:"Track message volumes, user engagement, and integrity trends"})]})})]})})]})]})}},38443:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var r=t(10326);t(17577);var a=t(79360),n=t(51223);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return r.jsx("div",{className:(0,n.cn)(i({variant:s}),e),...t})}},91664:(e,s,t)=>{"use strict";t.d(s,{z:()=>o});var r=t(10326),a=t(17577),n=t(34214),i=t(79360),l=t(51223);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...i},o)=>{let d=a?n.g7:"button";return r.jsx(d,{className:(0,l.cn)(c({variant:s,size:t,className:e})),ref:o,...i})});o.displayName="Button"},29752:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>l,SZ:()=>o,Zb:()=>i,aY:()=>d,ll:()=>c});var r=t(10326),a=t(17577),n=t(51223);let i=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let l=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let c=a.forwardRef(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let o=a.forwardRef(({className:e,...s},t)=>r.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let d=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},41190:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var r=t(10326),a=t(17577),n=t(51223);let i=a.forwardRef(({className:e,type:s,...t},a)=>r.jsx("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},44794:(e,s,t)=>{"use strict";t.d(s,{_:()=>o});var r=t(10326),a=t(17577),n=t(34478),i=t(79360),l=t(51223);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...s},t)=>r.jsx(n.f,{ref:t,className:(0,l.cn)(c(),e),...s}));o.displayName=n.f.displayName},50384:(e,s,t)=>{"use strict";t.d(s,{SP:()=>o,dr:()=>c,mQ:()=>l,nU:()=>d});var r=t(10326),a=t(17577),n=t(28407),i=t(51223);let l=n.fC,c=a.forwardRef(({className:e,...s},t)=>r.jsx(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=n.aV.displayName;let o=a.forwardRef(({className:e,...s},t)=>r.jsx(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=n.xz.displayName;let d=a.forwardRef(({className:e,...s},t)=>r.jsx(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=n.VY.displayName},51223:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(41135),a=t(31009);function n(...e){return(0,a.m6)((0,r.W)(e))}},92814:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(19510),a=t(58585),n=t(95456);let i=(0,t(68570).createProxy)(String.raw`C:\Users\HP\Documents\InfTech-quiz-management-system\src\components\admin\chat-management.tsx#ChatManagement`);async function l(){try{return await (0,n.MH)("ADMIN"),r.jsx(i,{})}catch(e){console.error("Authentication error in admin chat dashboard:",e),(0,a.redirect)("/admin")}}},32029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>i});var r=t(19510),a=t(25384),n=t.n(a);t(5023);let i={title:"Quiz Management System",description:"A comprehensive quiz management system for admins and students"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${n().className} bg-professional-gradient`,children:r.jsx("div",{className:"min-h-screen",children:e})})})}},95456:(e,s,t)=>{"use strict";t.d(s,{Gg:()=>a,MH:()=>i});var r=t(71615);async function a(){try{let e=(0,r.cookies)().get("user-session");if(!e||!e.value||""===e.value.trim())return null;let s=JSON.parse(e.value);if(!s||!s.id||!s.email||!s.name||!s.role)return console.warn("Invalid session structure:",s),null;return s}catch(e){return console.error("Error getting session:",e),null}}async function n(){let e=await a();if(!e)throw Error("Authentication required");return e}async function i(e){let s=await n();if(s.role!==e)throw Error(`Access denied. Required role: ${e}`);return s}},5023:()=>{},15594:(e,s,t)=>{"use strict";t.d(s,{Pc:()=>b,ck:()=>k,fC:()=>P});var r=t(17577),a=t(82561),n=t(70545),i=t(48051),l=t(93095),c=t(88957),o=t(45226),d=t(55049),u=t(52067),m=t(17124),x=t(10326),h="rovingFocusGroup.onEntryFocus",f={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[v,g,j]=(0,n.B)(p),[y,b]=(0,l.b)(p,[j]),[N,w]=y(p),C=r.forwardRef((e,s)=>(0,x.jsx)(v.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(v.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(S,{...e,ref:s})})}));C.displayName=p;var S=r.forwardRef((e,s)=>{let{__scopeRovingFocusGroup:t,orientation:n,loop:l=!1,dir:c,currentTabStopId:v,defaultCurrentTabStopId:j,onCurrentTabStopIdChange:y,onEntryFocus:b,preventScrollOnEntryFocus:w=!1,...C}=e,S=r.useRef(null),R=(0,i.e)(s,S),I=(0,m.gm)(c),[A,P]=(0,u.T)({prop:v,defaultProp:j??null,onChange:y,caller:p}),[k,M]=r.useState(!1),_=(0,d.W)(b),z=g(t),D=r.useRef(!1),[T,E]=r.useState(0);return r.useEffect(()=>{let e=S.current;if(e)return e.addEventListener(h,_),()=>e.removeEventListener(h,_)},[_]),(0,x.jsx)(N,{scope:t,orientation:n,dir:I,loop:l,currentTabStopId:A,onItemFocus:r.useCallback(e=>P(e),[P]),onItemShiftTab:r.useCallback(()=>M(!0),[]),onFocusableItemAdd:r.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>E(e=>e-1),[]),children:(0,x.jsx)(o.WV.div,{tabIndex:k||0===T?-1:0,"data-orientation":n,...C,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,a.Mj)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,a.Mj)(e.onFocus,e=>{let s=!D.current;if(e.target===e.currentTarget&&s&&!k){let s=new CustomEvent(h,f);if(e.currentTarget.dispatchEvent(s),!s.defaultPrevented){let e=z().filter(e=>e.focusable);Z([e.find(e=>e.active),e.find(e=>e.id===A),...e].filter(Boolean).map(e=>e.ref.current),w)}}D.current=!1}),onBlur:(0,a.Mj)(e.onBlur,()=>M(!1))})})}),R="RovingFocusGroupItem",I=r.forwardRef((e,s)=>{let{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:l,children:d,...u}=e,m=(0,c.M)(),h=l||m,f=w(R,t),p=f.currentTabStopId===h,j=g(t),{onFocusableItemAdd:y,onFocusableItemRemove:b,currentTabStopId:N}=f;return r.useEffect(()=>{if(n)return y(),()=>b()},[n,y,b]),(0,x.jsx)(v.ItemSlot,{scope:t,id:h,focusable:n,active:i,children:(0,x.jsx)(o.WV.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...u,ref:s,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n?f.onItemFocus(h):e.preventDefault()}),onFocus:(0,a.Mj)(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){f.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let s=function(e,s,t){var r;let a=(r=e.key,"rtl"!==t?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===s&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===s&&["ArrowUp","ArrowDown"].includes(a)))return A[a]}(e,f.orientation,f.dir);if(void 0!==s){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let t=j().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===s)t.reverse();else if("prev"===s||"next"===s){"prev"===s&&t.reverse();let r=t.indexOf(e.currentTarget);t=f.loop?function(e,s){return e.map((t,r)=>e[(s+r)%e.length])}(t,r+1):t.slice(r+1)}setTimeout(()=>Z(t))}}),children:"function"==typeof d?d({isCurrentTabStop:p,hasTabStop:null!=N}):d})})});I.displayName=R;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z(e,s=!1){let t=document.activeElement;for(let r of e)if(r===t||(r.focus({preventScroll:s}),document.activeElement!==t))return}var P=C,k=I}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,1615,349,9735,3644,5645],()=>t(19073));module.exports=r})();