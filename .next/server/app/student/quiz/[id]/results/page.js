(()=>{var e={};e.id=4180,e.ids=[4180],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},87373:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c}),r(3606),r(32029),r(35866);var s=r(23191),n=r(88716),i=r(37922),a=r.n(i),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let c=["",{children:["student",{children:["quiz",{children:["[id]",{children:["results",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3606)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\student\\quiz\\[id]\\results\\page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\student\\quiz\\[id]\\results\\page.tsx"],u="/student/quiz/[id]/results/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/student/quiz/[id]/results/page",pathname:"/student/quiz/[id]/results",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},83556:(e,t,r)=>{Promise.resolve().then(r.bind(r,98194))},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},54659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},40617:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},69436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},53468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},17069:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},62783:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},45091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},91470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},98194:(e,t,r)=>{"use strict";r.d(t,{QuizResults:()=>b});var s=r(10326),n=r(17577),i=r(35047),a=r(91664),l=r(29752),d=r(38443),c=r(86333),o=r(40617),u=r(95920),x=r(6343),m=r(54659),f=r(91470),p=r(53468),h=r(48998),g=r(17069),j=r(94019),y=r(25023);function b({attempt:e}){var t;let r=(0,i.useRouter)(),[b,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)(null);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)(a.z,{variant:"ghost",onClick:()=>r.back(),className:"mr-4",children:[s.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Quiz Results"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[N&&(0,s.jsxs)(a.z,{variant:"outline",size:"sm",onClick:()=>v(!b),children:[s.jsx(o.Z,{className:"h-4 w-4 mr-2"}),b?"Hide Discussion":"Join Discussion"]}),(0,s.jsxs)(a.z,{variant:"outline",onClick:()=>r.push("/student/dashboard"),children:[s.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Dashboard"]})]})]})})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(l.Zb,{className:"mb-8",children:[s.jsx(l.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx(l.ll,{className:"text-2xl",children:e.quiz.title}),(0,s.jsxs)(l.SZ,{children:["Quiz completed on ",new Date(e.completedAt||e.startedAt).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:`text-4xl font-bold ${e.score>=e.quiz.passingScore?"text-green-600":"text-red-600"}`,children:[e.score,"%"]}),s.jsx(d.C,{variant:e.score>=e.quiz.passingScore?"default":"destructive",className:"mt-2",children:e.passed?"Passed":"Failed"})]})]})}),(0,s.jsxs)(l.aY,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mx-auto mb-2",children:s.jsx(x.Z,{className:"h-6 w-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold",children:e.quiz.questions.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mx-auto mb-2",children:s.jsx(m.Z,{className:"h-6 w-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.answers.filter(e=>e.isCorrect).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-2",children:s.jsx(f.Z,{className:"h-6 w-6 text-red-600"})}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.answers.filter(e=>!e.isCorrect).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Incorrect"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-full mx-auto mb-2",children:s.jsx(p.Z,{className:"h-6 w-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[e.quiz.passingScore,"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Passing Score"})]})]}),e.timeSpent&&s.jsx("div",{className:"mt-6 pt-6 border-t",children:(0,s.jsxs)("div",{className:"flex items-center justify-center text-gray-600",children:[s.jsx(h.Z,{className:"h-4 w-4 mr-2"}),(0,s.jsxs)("span",{children:["Time taken: ",(t=e.timeSpent,`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`)]})]})})]})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[s.jsx(l.ll,{children:"Question Review"}),s.jsx(l.SZ,{children:"Review your answers and see the correct solutions"})]}),s.jsx(l.aY,{className:"space-y-6",children:e.answers.map((e,t)=>{let r=e.question,n=r.options.filter(e=>e.isCorrect),i=r.options.find(t=>t.id===e.selectedOptionId);return(0,s.jsxs)(l.Zb,{className:`border-l-4 ${e.isCorrect?"border-l-green-500":"border-l-red-500"}`,children:[s.jsx(l.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(l.ll,{className:"text-lg",children:["Question ",t+1]}),s.jsx(l.SZ,{className:"mt-2",children:r.text})]}),s.jsx("div",{className:"ml-4",children:e.isCorrect?s.jsx(m.Z,{className:"h-6 w-6 text-green-600"}):s.jsx(f.Z,{className:"h-6 w-6 text-red-600"})})]})}),(0,s.jsxs)(l.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Your Answer:"}),i?s.jsx("div",{className:`p-3 rounded-lg ${e.isCorrect?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("span",{className:e.isCorrect?"text-green-800":"text-red-800",children:i.text})}):s.jsx("div",{className:"p-3 rounded-lg bg-gray-50 border border-gray-200",children:s.jsx("span",{className:"text-gray-600",children:"No answer selected"})})]}),!e.isCorrect&&(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Correct Answer:"}),s.jsx("div",{className:"p-3 rounded-lg bg-green-50 border border-green-200",children:s.jsx("span",{className:"text-green-800",children:n.map(e=>e.text).join(", ")})})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"All Options:"}),s.jsx("div",{className:"space-y-2",children:r.options.map(t=>{let r=t.id===e.selectedOptionId,n=t.isCorrect;return(0,s.jsxs)("div",{className:`p-2 rounded border ${n?"bg-green-50 border-green-200 text-green-800":r?"bg-red-50 border-red-200 text-red-800":"bg-gray-50 border-gray-200 text-gray-600"}`,children:[t.text,n&&s.jsx("span",{className:"ml-2 text-green-600",children:"✓"}),r&&!n&&s.jsx("span",{className:"ml-2 text-red-600",children:"✗"})]},t.id)})})]})]})]},e.id)})})]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-center space-x-4",children:[(0,s.jsxs)(a.z,{variant:"outline",onClick:()=>r.push("/student/dashboard"),children:[s.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,s.jsxs)(a.z,{onClick:()=>r.push("/student/dashboard"),children:[s.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"View All Results"]})]}),b&&N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Quiz Discussion - ",e.quiz.title]}),s.jsx(a.z,{variant:"ghost",size:"sm",onClick:()=>v(!1),children:s.jsx(j.Z,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(y.N,{roomId:N,userId:e.userId})})]})})]})]})}},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>a,aY:()=>o,ll:()=>d});var s=r(10326),n=r(17577),i=r(51223);let a=n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));a.displayName="Card";let l=n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=n.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let c=n.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},58585:(e,t,r)=>{"use strict";var s=r(61085);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}})},61085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return s.RedirectType},notFound:function(){return n.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(83953),n=r(16399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return n},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return d},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return x},isRedirectError:function(){return u},permanentRedirect:function(){return o},redirect:function(){return c}});let n=r(54580),i=r(72934),a=r(8586),l="NEXT_REDIRECT";function d(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let s=Error(l);s.digest=l+";"+t+";"+e+";"+r+";";let i=n.requestAsyncStorage.getStore();return i&&(s.mutableCookies=i.mutableCookies),s}function c(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw d(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function o(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw d(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,n]=e.digest.split(";",4),i=Number(n);return t===l&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(i)&&i in a.RedirectStatusCode}function x(e){return u(e)?e.digest.split(";",3)[2]:null}function m(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,dynamic:()=>d});var s=r(19510),n=r(58585),i=r(95456),a=r(13538);let l=(0,r(68570).createProxy)(String.raw`C:\Users\HP\Documents\InfTech-quiz-management-system\src\components\student\quiz-results.tsx#QuizResults`),d="force-dynamic";async function c({params:e}){try{let t=await (0,i.MH)("STUDENT"),r=await a._.quizAttempt.findFirst({where:{userId:t.id,quizId:e.id,completedAt:{not:null}},include:{quiz:{include:{questions:{include:{options:!0},orderBy:{order:"asc"}}}},answers:{include:{question:{include:{options:!0}}}}},orderBy:{completedAt:"desc"}});return r||(0,n.redirect)("/student/dashboard"),s.jsx(l,{attempt:r})}catch(e){console.error("Authentication error in quiz results page:",e),e instanceof Error&&e.message.includes("Authentication required")&&(0,n.redirect)("/student"),(0,n.redirect)("/student")}}},95456:(e,t,r)=>{"use strict";r.d(t,{Gg:()=>n,MH:()=>a});var s=r(71615);async function n(){try{let e=(0,s.cookies)().get("user-session");if(!e||!e.value||""===e.value.trim())return null;let t=JSON.parse(e.value);if(!t||!t.id||!t.email||!t.name||!t.role)return console.warn("Invalid session structure:",t),null;return t}catch(e){return console.error("Error getting session:",e),null}}async function i(){let e=await n();if(!e)throw Error("Authentication required");return e}async function a(e){let t=await i();if(t.role!==e)throw Error(`Access denied. Required role: ${e}`);return t}},13538:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var s=r(53524);let n=globalThis.prisma??new s.PrismaClient}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,1615,349,9735,7108],()=>r(87373));module.exports=s})();