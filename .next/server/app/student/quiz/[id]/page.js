(()=>{var e={};e.id=2799,e.ids=[2799],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},73849:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(66863),t(32029),t(35866);var i=t(23191),n=t(88716),a=t(37922),l=t.n(a),r=t(95231),d={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);t.d(s,d);let c=["",{children:["student",{children:["quiz",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,66863)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\student\\quiz\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\HP\\Documents\\InfTech-quiz-management-system\\src\\app\\student\\quiz\\[id]\\page.tsx"],m="/student/quiz/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/student/quiz/[id]/page",pathname:"/student/quiz/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},56121:(e,s,t)=>{Promise.resolve().then(t.bind(t,28826))},28826:(e,s,t)=>{"use strict";t.d(s,{QuizInterface:()=>b});var i=t(10326),n=t(17577),a=t(35047),l=t(91664),r=t(29752),d=t(3282),c=t(9280),o=t(44794),m=t(33261),x=t(86333),u=t(48998),h=t(40617),p=t(37202),j=t(54659),g=t(75290),f=t(24230),N=t(94019),v=t(25023);function b({quiz:e,userId:s}){let t=(0,a.useRouter)(),[b,w]=(0,n.useState)(0),[y,q]=(0,n.useState)([]),[z,C]=(0,n.useState)(null),[P,I]=(0,n.useState)(!1),[S,_]=(0,n.useState)(""),[k]=(0,n.useState)(Date.now()),[O,T]=(0,n.useState)(!1),[E,Z]=(0,n.useState)(null),[A,M]=(0,n.useState)(!0),D=e.questions[b],H=b===e.questions.length-1,L=0===b,U=(e,s)=>{q(t=>{let i=[...t],n=i[b];return"MULTIPLE_CHOICE"===D.type?n.selectedOptionIds=s?[e]:[]:s?n.selectedOptionIds=[e]:n.selectedOptionIds=[],i})},F=async()=>{I(!0),_("");try{let i=Math.floor((Date.now()-k)/1e3),n=await fetch("/api/quiz-attempts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quizId:e.id,userId:s,answers:y,timeSpent:i})}),a=await n.json();if(!n.ok)throw Error(a.error||"Failed to submit quiz");M(!1),t.push(`/student/quiz/${e.id}/results`)}catch(e){_(e instanceof Error?e.message:"An error occurred")}finally{I(!1)}},Q=()=>y[b]?.selectedOptionIds||[],$=()=>y.every(e=>e.selectedOptionIds.length>0);return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)(l.z,{variant:"ghost",onClick:()=>t.back(),className:"mr-4",children:[i.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:e.title})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[null!==z&&(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(u.Z,{className:"h-4 w-4"}),i.jsx("span",{className:z<300?"text-red-600 font-medium":"",children:`${Math.floor(z/60)}:${(z%60).toString().padStart(2,"0")}`})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:[y.filter(e=>e.selectedOptionIds.length>0).length,"/",e.questions.length," answered",$()&&i.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"âœ“ All answered"})]}),E&&(0,i.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>T(!O),className:A?"opacity-50 cursor-not-allowed":"",disabled:A,title:A?"Chat will be available after quiz completion":"Toggle quiz discussion",children:[i.jsx(h.Z,{className:"h-4 w-4 mr-2"}),O?"Hide Chat":"Show Chat"]})]})]})})}),(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[S&&(0,i.jsxs)(m.bZ,{variant:"destructive",className:"mb-6",children:[i.jsx(p.Z,{className:"h-4 w-4"}),i.jsx(m.X,{children:S})]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,i.jsxs)("span",{children:["Question ",b+1," of ",e.questions.length]}),(0,i.jsxs)("span",{children:[Math.round((b+1)/e.questions.length*100),"% Complete"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(b+1)/e.questions.length*100}%`}})}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["Progress: ",b+1,"/",e.questions.length]}),(0,i.jsxs)("span",{children:["Answered: ",y.filter(e=>e.selectedOptionIds.length>0).length,"/",e.questions.length]})]})]}),(0,i.jsxs)(r.Zb,{className:"mb-8",children:[i.jsx(r.Ol,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx(r.ll,{className:"text-lg",children:D.text}),i.jsx(r.SZ,{children:"MULTIPLE_CHOICE"===D.type?"Select the correct answer":"Select True or False"})]}),Q().length>0&&i.jsx("div",{className:"ml-4 flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(j.Z,{className:"h-5 w-5 text-green-600"})})})]})}),i.jsx(r.aY,{children:"MULTIPLE_CHOICE"===D.type?i.jsx(d.E,{value:Q()[0]||"",onValueChange:e=>U(e,!0),children:D.options.map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx(d.m,{value:e.id,id:e.id}),i.jsx(o._,{htmlFor:e.id,className:"flex-1 cursor-pointer",children:e.text})]},e.id))}):i.jsx("div",{className:"space-y-3",children:D.options.map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx(c.X,{id:e.id,checked:Q().includes(e.id),onCheckedChange:s=>U(e.id,!!s)}),i.jsx(o._,{htmlFor:e.id,className:"flex-1 cursor-pointer",children:e.text})]},e.id))})})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)(l.z,{variant:"outline",onClick:()=>{L||w(e=>e-1)},disabled:L,children:[i.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,i.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[H&&!$()&&(0,i.jsxs)("div",{className:"text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-200",children:[i.jsx(p.Z,{className:"h-4 w-4 inline mr-2"}),"Please answer all ",e.questions.length," questions before submitting (",y.filter(e=>e.selectedOptionIds.length>0).length,"/",e.questions.length," answered)"]}),i.jsx("div",{className:"flex space-x-4",children:H?(0,i.jsxs)(l.z,{onClick:F,disabled:P||!$(),children:[P&&i.jsx(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),i.jsx(j.Z,{className:"mr-2 h-4 w-4"}),"Submit Quiz"]}):(0,i.jsxs)(l.z,{onClick:()=>{H||w(e=>e+1)},children:["Next",i.jsx(f.Z,{className:"h-4 w-4 ml-2"})]})})]})]}),i.jsx(r.Zb,{className:"mt-8",children:i.jsx(r.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total Questions:"}),i.jsx("span",{className:"ml-2 font-medium",children:e.questions.length})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Passing Score:"}),(0,i.jsxs)("span",{className:"ml-2 font-medium",children:[e.passingScore,"%"]})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Time Limit:"}),i.jsx("span",{className:"ml-2 font-medium",children:e.timeLimit?`${e.timeLimit} minutes`:"No limit"})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Created by:"}),i.jsx("span",{className:"ml-2 font-medium",children:e.creator.name})]})]})})})]}),O&&E&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold",children:["Quiz Discussion - ",e.title]}),i.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>T(!1),children:i.jsx(N.Z,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex-1 overflow-hidden",children:i.jsx(v.N,{roomId:E,userId:s})})]})})]})}},66863:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,dynamic:()=>d});var i=t(19510),n=t(58585),a=t(95456),l=t(13538);let r=(0,t(68570).createProxy)(String.raw`C:\Users\HP\Documents\InfTech-quiz-management-system\src\components\student\quiz-interface.tsx#QuizInterface`),d="force-dynamic";async function c({params:e}){let s;try{s=await (0,a.MH)("STUDENT")}catch(e){console.error("Authentication error in quiz page:",e),e instanceof Error&&e.message.includes("Authentication required")&&(0,n.redirect)("/student"),(0,n.redirect)("/student")}let t=await l._.quiz.findFirst({where:{id:e.id,OR:[{isActive:!0},{startAt:{lte:new Date}}]},include:{questions:{include:{options:!0},orderBy:{order:"asc"}},creator:{select:{name:!0}}}});return t||(0,n.redirect)("/student/dashboard"),await l._.quizAttempt.findFirst({where:{userId:s.id,quizId:e.id,completedAt:{not:null}}})&&(0,n.redirect)(`/student/quiz/${e.id}/results`),i.jsx(r,{quiz:t,userId:s.id})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[9276,1615,349,9735,3644,8875,6306,5463],()=>t(73849));module.exports=i})();