"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analytics/predictive/route";
exports.ids = ["app/api/analytics/predictive/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fpredictive%2Froute&page=%2Fapi%2Fanalytics%2Fpredictive%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fpredictive%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fpredictive%2Froute&page=%2Fapi%2Fanalytics%2Fpredictive%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fpredictive%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Documents_InfTech_quiz_management_system_src_app_api_analytics_predictive_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analytics/predictive/route.ts */ \"(rsc)/./src/app/api/analytics/predictive/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analytics/predictive/route\",\n        pathname: \"/api/analytics/predictive\",\n        filename: \"route\",\n        bundlePath: \"app/api/analytics/predictive/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Documents\\\\InfTech-quiz-management-system\\\\src\\\\app\\\\api\\\\analytics\\\\predictive\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_Documents_InfTech_quiz_management_system_src_app_api_analytics_predictive_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analytics/predictive/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXRpY3MlMkZwcmVkaWN0aXZlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXRpY3MlMkZwcmVkaWN0aXZlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl0aWNzJTJGcHJlZGljdGl2ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0RvY3VtZW50cyU1Q0luZlRlY2gtcXVpei1tYW5hZ2VtZW50LXN5c3RlbSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSFAlNUNEb2N1bWVudHMlNUNJbmZUZWNoLXF1aXotbWFuYWdlbWVudC1zeXN0ZW0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dEO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcXVpei1tYW5hZ2VtZW50LXN5c3RlbS8/OGU4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEb2N1bWVudHNcXFxcSW5mVGVjaC1xdWl6LW1hbmFnZW1lbnQtc3lzdGVtXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGFuYWx5dGljc1xcXFxwcmVkaWN0aXZlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXRpY3MvcHJlZGljdGl2ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5dGljcy9wcmVkaWN0aXZlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXRpY3MvcHJlZGljdGl2ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEhQXFxcXERvY3VtZW50c1xcXFxJbmZUZWNoLXF1aXotbWFuYWdlbWVudC1zeXN0ZW1cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYW5hbHl0aWNzXFxcXHByZWRpY3RpdmVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5dGljcy9wcmVkaWN0aXZlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fpredictive%2Froute&page=%2Fapi%2Fanalytics%2Fpredictive%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fpredictive%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analytics/predictive/route.ts":
/*!***************************************************!*\
  !*** ./src/app/api/analytics/predictive/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n// GET /api/analytics/predictive - Get predictive analytics for student success\nasync function GET(request) {\n    try {\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireRole)(\"ADMIN\");\n        const { searchParams } = new URL(request.url);\n        const timeRange = parseInt(searchParams.get(\"timeRange\") || \"90\") // days\n        ;\n        const startDate = new Date();\n        startDate.setDate(startDate.getDate() - timeRange);\n        // Get all students with their engagement and performance data\n        const students = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findMany({\n            where: {\n                role: \"STUDENT\"\n            },\n            include: {\n                chatMessages: {\n                    where: {\n                        createdAt: {\n                            gte: startDate\n                        },\n                        isDeleted: false,\n                        isSystemMessage: false\n                    },\n                    select: {\n                        id: true,\n                        createdAt: true,\n                        room: {\n                            select: {\n                                type: true,\n                                quizId: true\n                            }\n                        }\n                    }\n                },\n                attempts: {\n                    where: {\n                        completedAt: {\n                            gte: startDate\n                        }\n                    },\n                    select: {\n                        id: true,\n                        score: true,\n                        passed: true,\n                        completedAt: true,\n                        quiz: {\n                            select: {\n                                id: true,\n                                title: true,\n                                passingScore: true\n                            }\n                        }\n                    }\n                },\n                studyGroupMemberships: {\n                    include: {\n                        group: {\n                            select: {\n                                id: true,\n                                name: true,\n                                createdAt: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        // Calculate predictive metrics for each student\n        const predictions = students.map((student)=>{\n            const chatEngagement = calculateChatEngagement(student.chatMessages);\n            const performanceMetrics = calculatePerformanceMetrics(student.attempts);\n            const studyGroupParticipation = calculateStudyGroupParticipation(student.studyGroupMemberships);\n            // Predict success probability using weighted factors\n            const successProbability = predictSuccessProbability({\n                chatEngagement,\n                performanceMetrics,\n                studyGroupParticipation\n            });\n            // Identify at-risk indicators\n            const riskFactors = identifyRiskFactors({\n                chatEngagement,\n                performanceMetrics,\n                studyGroupParticipation,\n                student\n            });\n            // Generate intervention recommendations\n            const interventions = generateInterventionRecommendations(riskFactors, {\n                chatEngagement,\n                performanceMetrics,\n                studyGroupParticipation\n            });\n            return {\n                student: {\n                    id: student.id,\n                    name: student.name,\n                    email: student.email\n                },\n                metrics: {\n                    chatEngagement,\n                    performanceMetrics,\n                    studyGroupParticipation\n                },\n                predictions: {\n                    successProbability,\n                    riskLevel: getRiskLevel(successProbability),\n                    nextQuizSuccessRate: predictNextQuizSuccess({\n                        chatEngagement,\n                        performanceMetrics\n                    })\n                },\n                riskFactors,\n                interventions\n            };\n        });\n        // Sort by risk level (highest risk first)\n        predictions.sort((a, b)=>a.predictions.successProbability - b.predictions.successProbability);\n        // Generate cohort insights\n        const cohortInsights = generateCohortInsights(predictions);\n        // Early warning system\n        const earlyWarnings = generateEarlyWarnings(predictions);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            predictions,\n            cohortInsights,\n            earlyWarnings,\n            summary: {\n                totalStudents: students.length,\n                highRiskStudents: predictions.filter((p)=>p.predictions.riskLevel === \"HIGH\").length,\n                mediumRiskStudents: predictions.filter((p)=>p.predictions.riskLevel === \"MEDIUM\").length,\n                lowRiskStudents: predictions.filter((p)=>p.predictions.riskLevel === \"LOW\").length,\n                averageSuccessProbability: predictions.reduce((sum, p)=>sum + p.predictions.successProbability, 0) / predictions.length\n            }\n        });\n    } catch (error) {\n        console.error(\"Error generating predictive analytics:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction calculateChatEngagement(messages) {\n    const totalMessages = messages.length;\n    const quizDiscussionMessages = messages.filter((m)=>m.room.type === \"QUIZ_DISCUSSION\").length;\n    const studyGroupMessages = messages.filter((m)=>m.room.type === \"STUDY_GROUP\").length;\n    const generalMessages = messages.filter((m)=>m.room.type === \"GENERAL\").length;\n    // Calculate engagement frequency (messages per day)\n    const daysSinceFirstMessage = messages.length > 0 ? Math.max(1, Math.ceil((new Date().getTime() - new Date(messages[0].createdAt).getTime()) / (1000 * 60 * 60 * 24))) : 1;\n    const engagementFrequency = totalMessages / daysSinceFirstMessage;\n    // Calculate engagement diversity score\n    const engagementTypes = [\n        quizDiscussionMessages > 0 ? 1 : 0,\n        studyGroupMessages > 0 ? 1 : 0,\n        generalMessages > 0 ? 1 : 0\n    ].reduce((sum, type)=>sum + type, 0);\n    const diversityScore = engagementTypes / 3;\n    return {\n        totalMessages,\n        quizDiscussionMessages,\n        studyGroupMessages,\n        generalMessages,\n        engagementFrequency,\n        diversityScore,\n        engagementScore: Math.min(100, engagementFrequency * 10 + diversityScore * 30)\n    };\n}\nfunction calculatePerformanceMetrics(attempts) {\n    if (attempts.length === 0) {\n        return {\n            totalAttempts: 0,\n            averageScore: 0,\n            passRate: 0,\n            improvementTrend: 0,\n            consistencyScore: 0,\n            recentPerformance: 0\n        };\n    }\n    const totalAttempts = attempts.length;\n    const averageScore = attempts.reduce((sum, attempt)=>sum + attempt.score, 0) / totalAttempts;\n    const passRate = attempts.filter((attempt)=>attempt.passed).length / totalAttempts;\n    // Calculate improvement trend (comparing first half vs second half)\n    const midpoint = Math.floor(totalAttempts / 2);\n    const firstHalfAvg = attempts.slice(0, midpoint).reduce((sum, attempt)=>sum + attempt.score, 0) / Math.max(1, midpoint);\n    const secondHalfAvg = attempts.slice(midpoint).reduce((sum, attempt)=>sum + attempt.score, 0) / Math.max(1, totalAttempts - midpoint);\n    const improvementTrend = secondHalfAvg - firstHalfAvg;\n    // Calculate consistency (inverse of standard deviation)\n    const variance = attempts.reduce((sum, attempt)=>sum + Math.pow(attempt.score - averageScore, 2), 0) / totalAttempts;\n    const standardDeviation = Math.sqrt(variance);\n    const consistencyScore = Math.max(0, 100 - standardDeviation);\n    // Recent performance (last 3 attempts)\n    const recentAttempts = attempts.slice(-3);\n    const recentPerformance = recentAttempts.reduce((sum, attempt)=>sum + attempt.score, 0) / recentAttempts.length;\n    return {\n        totalAttempts,\n        averageScore,\n        passRate,\n        improvementTrend,\n        consistencyScore,\n        recentPerformance\n    };\n}\nfunction calculateStudyGroupParticipation(memberships) {\n    const activeGroups = memberships.length;\n    const participationScore = Math.min(100, activeGroups * 25) // Max 100 for 4+ groups\n    ;\n    return {\n        activeGroups,\n        participationScore,\n        hasStudyGroups: activeGroups > 0\n    };\n}\nfunction predictSuccessProbability(metrics) {\n    const { chatEngagement, performanceMetrics, studyGroupParticipation } = metrics;\n    // Weighted factors for success prediction\n    const weights = {\n        performance: 0.4,\n        chatEngagement: 0.3,\n        studyGroup: 0.2,\n        consistency: 0.1\n    };\n    const performanceScore = Math.min(100, performanceMetrics.averageScore);\n    const engagementScore = chatEngagement.engagementScore;\n    const studyGroupScore = studyGroupParticipation.participationScore;\n    const consistencyScore = performanceMetrics.consistencyScore;\n    const weightedScore = performanceScore * weights.performance + engagementScore * weights.chatEngagement + studyGroupScore * weights.studyGroup + consistencyScore * weights.consistency;\n    return Math.round(weightedScore);\n}\nfunction getRiskLevel(successProbability) {\n    if (successProbability >= 75) return \"LOW\";\n    if (successProbability >= 50) return \"MEDIUM\";\n    return \"HIGH\";\n}\nfunction predictNextQuizSuccess(metrics) {\n    const { chatEngagement, performanceMetrics } = metrics;\n    // Factor in recent performance trend and engagement\n    const trendBonus = performanceMetrics.improvementTrend > 0 ? 10 : -5;\n    const engagementBonus = chatEngagement.engagementScore > 50 ? 5 : -10;\n    const baseRate = performanceMetrics.recentPerformance || performanceMetrics.averageScore;\n    const predictedRate = Math.max(0, Math.min(100, baseRate + trendBonus + engagementBonus));\n    return Math.round(predictedRate);\n}\nfunction identifyRiskFactors(data) {\n    const { chatEngagement, performanceMetrics, studyGroupParticipation, student } = data;\n    const riskFactors = [];\n    // Performance-based risks\n    if (performanceMetrics.averageScore < 60) {\n        riskFactors.push({\n            type: \"LOW_PERFORMANCE\",\n            severity: \"HIGH\",\n            description: \"Consistently low quiz scores\",\n            value: performanceMetrics.averageScore\n        });\n    }\n    if (performanceMetrics.improvementTrend < -10) {\n        riskFactors.push({\n            type: \"DECLINING_PERFORMANCE\",\n            severity: \"HIGH\",\n            description: \"Performance declining over time\",\n            value: performanceMetrics.improvementTrend\n        });\n    }\n    // Engagement-based risks\n    if (chatEngagement.totalMessages < 5) {\n        riskFactors.push({\n            type: \"LOW_ENGAGEMENT\",\n            severity: \"MEDIUM\",\n            description: \"Very low chat participation\",\n            value: chatEngagement.totalMessages\n        });\n    }\n    if (chatEngagement.engagementFrequency < 0.1) {\n        riskFactors.push({\n            type: \"INFREQUENT_PARTICIPATION\",\n            severity: \"MEDIUM\",\n            description: \"Infrequent learning activities\",\n            value: chatEngagement.engagementFrequency\n        });\n    }\n    // Study group risks\n    if (!studyGroupParticipation.hasStudyGroups) {\n        riskFactors.push({\n            type: \"NO_STUDY_GROUPS\",\n            severity: \"LOW\",\n            description: \"Not participating in study groups\",\n            value: 0\n        });\n    }\n    // Consistency risks\n    if (performanceMetrics.consistencyScore < 30) {\n        riskFactors.push({\n            type: \"INCONSISTENT_PERFORMANCE\",\n            severity: \"MEDIUM\",\n            description: \"Highly variable quiz performance\",\n            value: performanceMetrics.consistencyScore\n        });\n    }\n    return riskFactors;\n}\nfunction generateInterventionRecommendations(riskFactors, metrics) {\n    const interventions = [];\n    riskFactors.forEach((risk)=>{\n        switch(risk.type){\n            case \"LOW_PERFORMANCE\":\n                interventions.push({\n                    type: \"ACADEMIC_SUPPORT\",\n                    priority: \"HIGH\",\n                    action: \"Schedule one-on-one tutoring session\",\n                    description: \"Provide additional academic support and review study strategies\"\n                });\n                break;\n            case \"DECLINING_PERFORMANCE\":\n                interventions.push({\n                    type: \"EARLY_WARNING\",\n                    priority: \"HIGH\",\n                    action: \"Immediate instructor meeting\",\n                    description: \"Address declining performance before it becomes critical\"\n                });\n                break;\n            case \"LOW_ENGAGEMENT\":\n                interventions.push({\n                    type: \"ENGAGEMENT_BOOST\",\n                    priority: \"MEDIUM\",\n                    action: \"Encourage chat participation\",\n                    description: \"Send personalized messages to increase discussion involvement\"\n                });\n                break;\n            case \"NO_STUDY_GROUPS\":\n                interventions.push({\n                    type: \"SOCIAL_LEARNING\",\n                    priority: \"LOW\",\n                    action: \"Invite to study group\",\n                    description: \"Connect with peers for collaborative learning\"\n                });\n                break;\n            case \"INCONSISTENT_PERFORMANCE\":\n                interventions.push({\n                    type: \"STUDY_HABITS\",\n                    priority: \"MEDIUM\",\n                    action: \"Study skills workshop\",\n                    description: \"Help develop consistent study routines and time management\"\n                });\n                break;\n        }\n    });\n    return interventions;\n}\nfunction generateCohortInsights(predictions) {\n    const totalStudents = predictions.length;\n    // Performance distribution\n    const performanceDistribution = {\n        excellent: predictions.filter((p)=>p.metrics.performanceMetrics.averageScore >= 90).length,\n        good: predictions.filter((p)=>p.metrics.performanceMetrics.averageScore >= 80 && p.metrics.performanceMetrics.averageScore < 90).length,\n        average: predictions.filter((p)=>p.metrics.performanceMetrics.averageScore >= 70 && p.metrics.performanceMetrics.averageScore < 80).length,\n        belowAverage: predictions.filter((p)=>p.metrics.performanceMetrics.averageScore < 70).length\n    };\n    // Engagement patterns\n    const engagementPatterns = {\n        highEngagement: predictions.filter((p)=>p.metrics.chatEngagement.engagementScore >= 70).length,\n        moderateEngagement: predictions.filter((p)=>p.metrics.chatEngagement.engagementScore >= 40 && p.metrics.chatEngagement.engagementScore < 70).length,\n        lowEngagement: predictions.filter((p)=>p.metrics.chatEngagement.engagementScore < 40).length\n    };\n    // Success correlation\n    const chatEngagementScores = predictions.map((p)=>p.metrics.chatEngagement.engagementScore);\n    const performanceScores = predictions.map((p)=>p.metrics.performanceMetrics.averageScore);\n    const correlation = calculateCorrelation(chatEngagementScores, performanceScores);\n    return {\n        performanceDistribution,\n        engagementPatterns,\n        correlation: {\n            chatEngagementVsPerformance: correlation,\n            strength: getCorrelationStrength(correlation)\n        },\n        trends: {\n            averageImprovement: predictions.reduce((sum, p)=>sum + p.metrics.performanceMetrics.improvementTrend, 0) / totalStudents,\n            studyGroupParticipation: predictions.filter((p)=>p.metrics.studyGroupParticipation.hasStudyGroups).length / totalStudents\n        }\n    };\n}\nfunction generateEarlyWarnings(predictions) {\n    const warnings = [];\n    // Critical risk students\n    const criticalRiskStudents = predictions.filter((p)=>p.predictions.riskLevel === \"HIGH\" && p.riskFactors.some((rf)=>rf.severity === \"HIGH\"));\n    if (criticalRiskStudents.length > 0) {\n        warnings.push({\n            type: \"CRITICAL_RISK\",\n            severity: \"HIGH\",\n            count: criticalRiskStudents.length,\n            message: `${criticalRiskStudents.length} students require immediate intervention`,\n            students: criticalRiskStudents.map((s)=>s.student.name)\n        });\n    }\n    // Declining performance trend\n    const decliningStudents = predictions.filter((p)=>p.metrics.performanceMetrics.improvementTrend < -15);\n    if (decliningStudents.length > 0) {\n        warnings.push({\n            type: \"DECLINING_TREND\",\n            severity: \"MEDIUM\",\n            count: decliningStudents.length,\n            message: `${decliningStudents.length} students showing significant performance decline`,\n            students: decliningStudents.map((s)=>s.student.name)\n        });\n    }\n    // Low engagement alert\n    const lowEngagementStudents = predictions.filter((p)=>p.metrics.chatEngagement.totalMessages < 3 && p.metrics.performanceMetrics.totalAttempts > 0);\n    if (lowEngagementStudents.length > 0) {\n        warnings.push({\n            type: \"LOW_ENGAGEMENT\",\n            severity: \"LOW\",\n            count: lowEngagementStudents.length,\n            message: `${lowEngagementStudents.length} students with very low engagement`,\n            students: lowEngagementStudents.map((s)=>s.student.name)\n        });\n    }\n    return warnings;\n}\nfunction calculateCorrelation(x, y) {\n    const n = x.length;\n    if (n === 0) return 0;\n    const sumX = x.reduce((sum, val)=>sum + val, 0);\n    const sumY = y.reduce((sum, val)=>sum + val, 0);\n    const sumXY = x.reduce((sum, val, i)=>sum + val * y[i], 0);\n    const sumX2 = x.reduce((sum, val)=>sum + val * val, 0);\n    const sumY2 = y.reduce((sum, val)=>sum + val * val, 0);\n    const numerator = n * sumXY - sumX * sumY;\n    const denominator = Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));\n    return denominator === 0 ? 0 : numerator / denominator;\n}\nfunction getCorrelationStrength(correlation) {\n    const abs = Math.abs(correlation);\n    if (abs >= 0.7) return \"Strong\";\n    if (abs >= 0.3) return \"Moderate\";\n    return \"Weak\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hbmFseXRpY3MvcHJlZGljdGl2ZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ2xCO0FBQ0c7QUFFeEMsK0VBQStFO0FBQ3hFLGVBQWVHLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1ILHNEQUFXQSxDQUFDO1FBQ2xDLE1BQU0sRUFBRUksWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUgsUUFBUUksR0FBRztRQUM1QyxNQUFNQyxZQUFZQyxTQUFTSixhQUFhSyxHQUFHLENBQUMsZ0JBQWdCLE1BQU0sT0FBTzs7UUFFekUsTUFBTUMsWUFBWSxJQUFJQztRQUN0QkQsVUFBVUUsT0FBTyxDQUFDRixVQUFVRyxPQUFPLEtBQUtOO1FBRXhDLDhEQUE4RDtRQUM5RCxNQUFNTyxXQUFXLE1BQU1mLCtDQUFNQSxDQUFDZ0IsSUFBSSxDQUFDQyxRQUFRLENBQUM7WUFDMUNDLE9BQU87Z0JBQUVDLE1BQU07WUFBVTtZQUN6QkMsU0FBUztnQkFDUEMsY0FBYztvQkFDWkgsT0FBTzt3QkFDTEksV0FBVzs0QkFBRUMsS0FBS1o7d0JBQVU7d0JBQzVCYSxXQUFXO3dCQUNYQyxpQkFBaUI7b0JBQ25CO29CQUNBQyxRQUFRO3dCQUNOQyxJQUFJO3dCQUNKTCxXQUFXO3dCQUNYTSxNQUFNOzRCQUNKRixRQUFRO2dDQUNORyxNQUFNO2dDQUNOQyxRQUFROzRCQUNWO3dCQUNGO29CQUNGO2dCQUNGO2dCQUNBQyxVQUFVO29CQUNSYixPQUFPO3dCQUNMYyxhQUFhOzRCQUFFVCxLQUFLWjt3QkFBVTtvQkFDaEM7b0JBQ0FlLFFBQVE7d0JBQ05DLElBQUk7d0JBQ0pNLE9BQU87d0JBQ1BDLFFBQVE7d0JBQ1JGLGFBQWE7d0JBQ2JHLE1BQU07NEJBQ0pULFFBQVE7Z0NBQ05DLElBQUk7Z0NBQ0pTLE9BQU87Z0NBQ1BDLGNBQWM7NEJBQ2hCO3dCQUNGO29CQUNGO2dCQUNGO2dCQUNBQyx1QkFBdUI7b0JB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bmFseXRpY3MvcHJlZGljdGl2ZS9yb3V0ZS50cz8yMzE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSdcbmltcG9ydCB7IHJlcXVpcmVSb2xlIH0gZnJvbSAnQC9saWIvYXV0aCdcblxuLy8gR0VUIC9hcGkvYW5hbHl0aWNzL3ByZWRpY3RpdmUgLSBHZXQgcHJlZGljdGl2ZSBhbmFseXRpY3MgZm9yIHN0dWRlbnQgc3VjY2Vzc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCByZXF1aXJlUm9sZSgnQURNSU4nKVxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IHRpbWVSYW5nZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3RpbWVSYW5nZScpIHx8ICc5MCcpIC8vIGRheXNcblxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKClcbiAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gdGltZVJhbmdlKVxuXG4gICAgLy8gR2V0IGFsbCBzdHVkZW50cyB3aXRoIHRoZWlyIGVuZ2FnZW1lbnQgYW5kIHBlcmZvcm1hbmNlIGRhdGFcbiAgICBjb25zdCBzdHVkZW50cyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHJvbGU6ICdTVFVERU5UJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBjaGF0TWVzc2FnZXM6IHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgY3JlYXRlZEF0OiB7IGd0ZTogc3RhcnREYXRlIH0sXG4gICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNTeXN0ZW1NZXNzYWdlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICAgIHJvb206IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBxdWl6SWQ6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0ZW1wdHM6IHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgY29tcGxldGVkQXQ6IHsgZ3RlOiBzdGFydERhdGUgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIHNjb3JlOiB0cnVlLFxuICAgICAgICAgICAgcGFzc2VkOiB0cnVlLFxuICAgICAgICAgICAgY29tcGxldGVkQXQ6IHRydWUsXG4gICAgICAgICAgICBxdWl6OiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHBhc3NpbmdTY29yZTogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdHVkeUdyb3VwTWVtYmVyc2hpcHM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBncm91cDoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIENhbGN1bGF0ZSBwcmVkaWN0aXZlIG1ldHJpY3MgZm9yIGVhY2ggc3R1ZGVudFxuICAgIGNvbnN0IHByZWRpY3Rpb25zID0gc3R1ZGVudHMubWFwKHN0dWRlbnQgPT4ge1xuICAgICAgY29uc3QgY2hhdEVuZ2FnZW1lbnQgPSBjYWxjdWxhdGVDaGF0RW5nYWdlbWVudChzdHVkZW50LmNoYXRNZXNzYWdlcylcbiAgICAgIGNvbnN0IHBlcmZvcm1hbmNlTWV0cmljcyA9IGNhbGN1bGF0ZVBlcmZvcm1hbmNlTWV0cmljcyhzdHVkZW50LmF0dGVtcHRzKVxuICAgICAgY29uc3Qgc3R1ZHlHcm91cFBhcnRpY2lwYXRpb24gPSBjYWxjdWxhdGVTdHVkeUdyb3VwUGFydGljaXBhdGlvbihzdHVkZW50LnN0dWR5R3JvdXBNZW1iZXJzaGlwcylcbiAgICAgIFxuICAgICAgLy8gUHJlZGljdCBzdWNjZXNzIHByb2JhYmlsaXR5IHVzaW5nIHdlaWdodGVkIGZhY3RvcnNcbiAgICAgIGNvbnN0IHN1Y2Nlc3NQcm9iYWJpbGl0eSA9IHByZWRpY3RTdWNjZXNzUHJvYmFiaWxpdHkoe1xuICAgICAgICBjaGF0RW5nYWdlbWVudCxcbiAgICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzLFxuICAgICAgICBzdHVkeUdyb3VwUGFydGljaXBhdGlvblxuICAgICAgfSlcblxuICAgICAgLy8gSWRlbnRpZnkgYXQtcmlzayBpbmRpY2F0b3JzXG4gICAgICBjb25zdCByaXNrRmFjdG9ycyA9IGlkZW50aWZ5Umlza0ZhY3RvcnMoe1xuICAgICAgICBjaGF0RW5nYWdlbWVudCxcbiAgICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzLFxuICAgICAgICBzdHVkeUdyb3VwUGFydGljaXBhdGlvbixcbiAgICAgICAgc3R1ZGVudFxuICAgICAgfSlcblxuICAgICAgLy8gR2VuZXJhdGUgaW50ZXJ2ZW50aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgaW50ZXJ2ZW50aW9ucyA9IGdlbmVyYXRlSW50ZXJ2ZW50aW9uUmVjb21tZW5kYXRpb25zKHJpc2tGYWN0b3JzLCB7XG4gICAgICAgIGNoYXRFbmdhZ2VtZW50LFxuICAgICAgICBwZXJmb3JtYW5jZU1ldHJpY3MsXG4gICAgICAgIHN0dWR5R3JvdXBQYXJ0aWNpcGF0aW9uXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdHVkZW50OiB7XG4gICAgICAgICAgaWQ6IHN0dWRlbnQuaWQsXG4gICAgICAgICAgbmFtZTogc3R1ZGVudC5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBzdHVkZW50LmVtYWlsXG4gICAgICAgIH0sXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBjaGF0RW5nYWdlbWVudCxcbiAgICAgICAgICBwZXJmb3JtYW5jZU1ldHJpY3MsXG4gICAgICAgICAgc3R1ZHlHcm91cFBhcnRpY2lwYXRpb25cbiAgICAgICAgfSxcbiAgICAgICAgcHJlZGljdGlvbnM6IHtcbiAgICAgICAgICBzdWNjZXNzUHJvYmFiaWxpdHksXG4gICAgICAgICAgcmlza0xldmVsOiBnZXRSaXNrTGV2ZWwoc3VjY2Vzc1Byb2JhYmlsaXR5KSxcbiAgICAgICAgICBuZXh0UXVpelN1Y2Nlc3NSYXRlOiBwcmVkaWN0TmV4dFF1aXpTdWNjZXNzKHtcbiAgICAgICAgICAgIGNoYXRFbmdhZ2VtZW50LFxuICAgICAgICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgcmlza0ZhY3RvcnMsXG4gICAgICAgIGludGVydmVudGlvbnNcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gU29ydCBieSByaXNrIGxldmVsIChoaWdoZXN0IHJpc2sgZmlyc3QpXG4gICAgcHJlZGljdGlvbnMuc29ydCgoYSwgYikgPT4gYS5wcmVkaWN0aW9ucy5zdWNjZXNzUHJvYmFiaWxpdHkgLSBiLnByZWRpY3Rpb25zLnN1Y2Nlc3NQcm9iYWJpbGl0eSlcblxuICAgIC8vIEdlbmVyYXRlIGNvaG9ydCBpbnNpZ2h0c1xuICAgIGNvbnN0IGNvaG9ydEluc2lnaHRzID0gZ2VuZXJhdGVDb2hvcnRJbnNpZ2h0cyhwcmVkaWN0aW9ucylcblxuICAgIC8vIEVhcmx5IHdhcm5pbmcgc3lzdGVtXG4gICAgY29uc3QgZWFybHlXYXJuaW5ncyA9IGdlbmVyYXRlRWFybHlXYXJuaW5ncyhwcmVkaWN0aW9ucylcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBwcmVkaWN0aW9ucyxcbiAgICAgIGNvaG9ydEluc2lnaHRzLFxuICAgICAgZWFybHlXYXJuaW5ncyxcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgdG90YWxTdHVkZW50czogc3R1ZGVudHMubGVuZ3RoLFxuICAgICAgICBoaWdoUmlza1N0dWRlbnRzOiBwcmVkaWN0aW9ucy5maWx0ZXIocCA9PiBwLnByZWRpY3Rpb25zLnJpc2tMZXZlbCA9PT0gJ0hJR0gnKS5sZW5ndGgsXG4gICAgICAgIG1lZGl1bVJpc2tTdHVkZW50czogcHJlZGljdGlvbnMuZmlsdGVyKHAgPT4gcC5wcmVkaWN0aW9ucy5yaXNrTGV2ZWwgPT09ICdNRURJVU0nKS5sZW5ndGgsXG4gICAgICAgIGxvd1Jpc2tTdHVkZW50czogcHJlZGljdGlvbnMuZmlsdGVyKHAgPT4gcC5wcmVkaWN0aW9ucy5yaXNrTGV2ZWwgPT09ICdMT1cnKS5sZW5ndGgsXG4gICAgICAgIGF2ZXJhZ2VTdWNjZXNzUHJvYmFiaWxpdHk6IHByZWRpY3Rpb25zLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnByZWRpY3Rpb25zLnN1Y2Nlc3NQcm9iYWJpbGl0eSwgMCkgLyBwcmVkaWN0aW9ucy5sZW5ndGhcbiAgICAgIH1cbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgcHJlZGljdGl2ZSBhbmFseXRpY3M6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVDaGF0RW5nYWdlbWVudChtZXNzYWdlczogYW55W10pIHtcbiAgY29uc3QgdG90YWxNZXNzYWdlcyA9IG1lc3NhZ2VzLmxlbmd0aFxuICBjb25zdCBxdWl6RGlzY3Vzc2lvbk1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5yb29tLnR5cGUgPT09ICdRVUlaX0RJU0NVU1NJT04nKS5sZW5ndGhcbiAgY29uc3Qgc3R1ZHlHcm91cE1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5yb29tLnR5cGUgPT09ICdTVFVEWV9HUk9VUCcpLmxlbmd0aFxuICBjb25zdCBnZW5lcmFsTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobSA9PiBtLnJvb20udHlwZSA9PT0gJ0dFTkVSQUwnKS5sZW5ndGhcblxuICAvLyBDYWxjdWxhdGUgZW5nYWdlbWVudCBmcmVxdWVuY3kgKG1lc3NhZ2VzIHBlciBkYXkpXG4gIGNvbnN0IGRheXNTaW5jZUZpcnN0TWVzc2FnZSA9IG1lc3NhZ2VzLmxlbmd0aCA+IDAgXG4gICAgPyBNYXRoLm1heCgxLCBNYXRoLmNlaWwoKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbmV3IERhdGUobWVzc2FnZXNbMF0uY3JlYXRlZEF0KS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKSlcbiAgICA6IDFcbiAgXG4gIGNvbnN0IGVuZ2FnZW1lbnRGcmVxdWVuY3kgPSB0b3RhbE1lc3NhZ2VzIC8gZGF5c1NpbmNlRmlyc3RNZXNzYWdlXG5cbiAgLy8gQ2FsY3VsYXRlIGVuZ2FnZW1lbnQgZGl2ZXJzaXR5IHNjb3JlXG4gIGNvbnN0IGVuZ2FnZW1lbnRUeXBlcyA9IFtcbiAgICBxdWl6RGlzY3Vzc2lvbk1lc3NhZ2VzID4gMCA/IDEgOiAwLFxuICAgIHN0dWR5R3JvdXBNZXNzYWdlcyA+IDAgPyAxIDogMCxcbiAgICBnZW5lcmFsTWVzc2FnZXMgPiAwID8gMSA6IDBcbiAgXS5yZWR1Y2UoKHN1bSwgdHlwZSkgPT4gc3VtICsgdHlwZSwgMClcblxuICBjb25zdCBkaXZlcnNpdHlTY29yZSA9IGVuZ2FnZW1lbnRUeXBlcyAvIDNcblxuICByZXR1cm4ge1xuICAgIHRvdGFsTWVzc2FnZXMsXG4gICAgcXVpekRpc2N1c3Npb25NZXNzYWdlcyxcbiAgICBzdHVkeUdyb3VwTWVzc2FnZXMsXG4gICAgZ2VuZXJhbE1lc3NhZ2VzLFxuICAgIGVuZ2FnZW1lbnRGcmVxdWVuY3ksXG4gICAgZGl2ZXJzaXR5U2NvcmUsXG4gICAgZW5nYWdlbWVudFNjb3JlOiBNYXRoLm1pbigxMDAsIChlbmdhZ2VtZW50RnJlcXVlbmN5ICogMTAgKyBkaXZlcnNpdHlTY29yZSAqIDMwKSlcbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVQZXJmb3JtYW5jZU1ldHJpY3MoYXR0ZW1wdHM6IGFueVtdKSB7XG4gIGlmIChhdHRlbXB0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxBdHRlbXB0czogMCxcbiAgICAgIGF2ZXJhZ2VTY29yZTogMCxcbiAgICAgIHBhc3NSYXRlOiAwLFxuICAgICAgaW1wcm92ZW1lbnRUcmVuZDogMCxcbiAgICAgIGNvbnNpc3RlbmN5U2NvcmU6IDAsXG4gICAgICByZWNlbnRQZXJmb3JtYW5jZTogMFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRvdGFsQXR0ZW1wdHMgPSBhdHRlbXB0cy5sZW5ndGhcbiAgY29uc3QgYXZlcmFnZVNjb3JlID0gYXR0ZW1wdHMucmVkdWNlKChzdW0sIGF0dGVtcHQpID0+IHN1bSArIGF0dGVtcHQuc2NvcmUsIDApIC8gdG90YWxBdHRlbXB0c1xuICBjb25zdCBwYXNzUmF0ZSA9IGF0dGVtcHRzLmZpbHRlcihhdHRlbXB0ID0+IGF0dGVtcHQucGFzc2VkKS5sZW5ndGggLyB0b3RhbEF0dGVtcHRzXG5cbiAgLy8gQ2FsY3VsYXRlIGltcHJvdmVtZW50IHRyZW5kIChjb21wYXJpbmcgZmlyc3QgaGFsZiB2cyBzZWNvbmQgaGFsZilcbiAgY29uc3QgbWlkcG9pbnQgPSBNYXRoLmZsb29yKHRvdGFsQXR0ZW1wdHMgLyAyKVxuICBjb25zdCBmaXJzdEhhbGZBdmcgPSBhdHRlbXB0cy5zbGljZSgwLCBtaWRwb2ludCkucmVkdWNlKChzdW0sIGF0dGVtcHQpID0+IHN1bSArIGF0dGVtcHQuc2NvcmUsIDApIC8gTWF0aC5tYXgoMSwgbWlkcG9pbnQpXG4gIGNvbnN0IHNlY29uZEhhbGZBdmcgPSBhdHRlbXB0cy5zbGljZShtaWRwb2ludCkucmVkdWNlKChzdW0sIGF0dGVtcHQpID0+IHN1bSArIGF0dGVtcHQuc2NvcmUsIDApIC8gTWF0aC5tYXgoMSwgdG90YWxBdHRlbXB0cyAtIG1pZHBvaW50KVxuICBjb25zdCBpbXByb3ZlbWVudFRyZW5kID0gc2Vjb25kSGFsZkF2ZyAtIGZpcnN0SGFsZkF2Z1xuXG4gIC8vIENhbGN1bGF0ZSBjb25zaXN0ZW5jeSAoaW52ZXJzZSBvZiBzdGFuZGFyZCBkZXZpYXRpb24pXG4gIGNvbnN0IHZhcmlhbmNlID0gYXR0ZW1wdHMucmVkdWNlKChzdW0sIGF0dGVtcHQpID0+IHN1bSArIE1hdGgucG93KGF0dGVtcHQuc2NvcmUgLSBhdmVyYWdlU2NvcmUsIDIpLCAwKSAvIHRvdGFsQXR0ZW1wdHNcbiAgY29uc3Qgc3RhbmRhcmREZXZpYXRpb24gPSBNYXRoLnNxcnQodmFyaWFuY2UpXG4gIGNvbnN0IGNvbnNpc3RlbmN5U2NvcmUgPSBNYXRoLm1heCgwLCAxMDAgLSBzdGFuZGFyZERldmlhdGlvbilcblxuICAvLyBSZWNlbnQgcGVyZm9ybWFuY2UgKGxhc3QgMyBhdHRlbXB0cylcbiAgY29uc3QgcmVjZW50QXR0ZW1wdHMgPSBhdHRlbXB0cy5zbGljZSgtMylcbiAgY29uc3QgcmVjZW50UGVyZm9ybWFuY2UgPSByZWNlbnRBdHRlbXB0cy5yZWR1Y2UoKHN1bSwgYXR0ZW1wdCkgPT4gc3VtICsgYXR0ZW1wdC5zY29yZSwgMCkgLyByZWNlbnRBdHRlbXB0cy5sZW5ndGhcblxuICByZXR1cm4ge1xuICAgIHRvdGFsQXR0ZW1wdHMsXG4gICAgYXZlcmFnZVNjb3JlLFxuICAgIHBhc3NSYXRlLFxuICAgIGltcHJvdmVtZW50VHJlbmQsXG4gICAgY29uc2lzdGVuY3lTY29yZSxcbiAgICByZWNlbnRQZXJmb3JtYW5jZVxuICB9XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0dWR5R3JvdXBQYXJ0aWNpcGF0aW9uKG1lbWJlcnNoaXBzOiBhbnlbXSkge1xuICBjb25zdCBhY3RpdmVHcm91cHMgPSBtZW1iZXJzaGlwcy5sZW5ndGhcbiAgY29uc3QgcGFydGljaXBhdGlvblNjb3JlID0gTWF0aC5taW4oMTAwLCBhY3RpdmVHcm91cHMgKiAyNSkgLy8gTWF4IDEwMCBmb3IgNCsgZ3JvdXBzXG5cbiAgcmV0dXJuIHtcbiAgICBhY3RpdmVHcm91cHMsXG4gICAgcGFydGljaXBhdGlvblNjb3JlLFxuICAgIGhhc1N0dWR5R3JvdXBzOiBhY3RpdmVHcm91cHMgPiAwXG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlZGljdFN1Y2Nlc3NQcm9iYWJpbGl0eShtZXRyaWNzOiBhbnkpIHtcbiAgY29uc3QgeyBjaGF0RW5nYWdlbWVudCwgcGVyZm9ybWFuY2VNZXRyaWNzLCBzdHVkeUdyb3VwUGFydGljaXBhdGlvbiB9ID0gbWV0cmljc1xuXG4gIC8vIFdlaWdodGVkIGZhY3RvcnMgZm9yIHN1Y2Nlc3MgcHJlZGljdGlvblxuICBjb25zdCB3ZWlnaHRzID0ge1xuICAgIHBlcmZvcm1hbmNlOiAwLjQsXG4gICAgY2hhdEVuZ2FnZW1lbnQ6IDAuMyxcbiAgICBzdHVkeUdyb3VwOiAwLjIsXG4gICAgY29uc2lzdGVuY3k6IDAuMVxuICB9XG5cbiAgY29uc3QgcGVyZm9ybWFuY2VTY29yZSA9IE1hdGgubWluKDEwMCwgcGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VTY29yZSlcbiAgY29uc3QgZW5nYWdlbWVudFNjb3JlID0gY2hhdEVuZ2FnZW1lbnQuZW5nYWdlbWVudFNjb3JlXG4gIGNvbnN0IHN0dWR5R3JvdXBTY29yZSA9IHN0dWR5R3JvdXBQYXJ0aWNpcGF0aW9uLnBhcnRpY2lwYXRpb25TY29yZVxuICBjb25zdCBjb25zaXN0ZW5jeVNjb3JlID0gcGVyZm9ybWFuY2VNZXRyaWNzLmNvbnNpc3RlbmN5U2NvcmVcblxuICBjb25zdCB3ZWlnaHRlZFNjb3JlID0gXG4gICAgKHBlcmZvcm1hbmNlU2NvcmUgKiB3ZWlnaHRzLnBlcmZvcm1hbmNlKSArXG4gICAgKGVuZ2FnZW1lbnRTY29yZSAqIHdlaWdodHMuY2hhdEVuZ2FnZW1lbnQpICtcbiAgICAoc3R1ZHlHcm91cFNjb3JlICogd2VpZ2h0cy5zdHVkeUdyb3VwKSArXG4gICAgKGNvbnNpc3RlbmN5U2NvcmUgKiB3ZWlnaHRzLmNvbnNpc3RlbmN5KVxuXG4gIHJldHVybiBNYXRoLnJvdW5kKHdlaWdodGVkU2NvcmUpXG59XG5cbmZ1bmN0aW9uIGdldFJpc2tMZXZlbChzdWNjZXNzUHJvYmFiaWxpdHk6IG51bWJlcik6ICdMT1cnIHwgJ01FRElVTScgfCAnSElHSCcge1xuICBpZiAoc3VjY2Vzc1Byb2JhYmlsaXR5ID49IDc1KSByZXR1cm4gJ0xPVydcbiAgaWYgKHN1Y2Nlc3NQcm9iYWJpbGl0eSA+PSA1MCkgcmV0dXJuICdNRURJVU0nXG4gIHJldHVybiAnSElHSCdcbn1cblxuZnVuY3Rpb24gcHJlZGljdE5leHRRdWl6U3VjY2VzcyhtZXRyaWNzOiBhbnkpIHtcbiAgY29uc3QgeyBjaGF0RW5nYWdlbWVudCwgcGVyZm9ybWFuY2VNZXRyaWNzIH0gPSBtZXRyaWNzXG4gIFxuICAvLyBGYWN0b3IgaW4gcmVjZW50IHBlcmZvcm1hbmNlIHRyZW5kIGFuZCBlbmdhZ2VtZW50XG4gIGNvbnN0IHRyZW5kQm9udXMgPSBwZXJmb3JtYW5jZU1ldHJpY3MuaW1wcm92ZW1lbnRUcmVuZCA+IDAgPyAxMCA6IC01XG4gIGNvbnN0IGVuZ2FnZW1lbnRCb251cyA9IGNoYXRFbmdhZ2VtZW50LmVuZ2FnZW1lbnRTY29yZSA+IDUwID8gNSA6IC0xMFxuICBcbiAgY29uc3QgYmFzZVJhdGUgPSBwZXJmb3JtYW5jZU1ldHJpY3MucmVjZW50UGVyZm9ybWFuY2UgfHwgcGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VTY29yZVxuICBjb25zdCBwcmVkaWN0ZWRSYXRlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBiYXNlUmF0ZSArIHRyZW5kQm9udXMgKyBlbmdhZ2VtZW50Qm9udXMpKVxuICBcbiAgcmV0dXJuIE1hdGgucm91bmQocHJlZGljdGVkUmF0ZSlcbn1cblxuZnVuY3Rpb24gaWRlbnRpZnlSaXNrRmFjdG9ycyhkYXRhOiBhbnkpIHtcbiAgY29uc3QgeyBjaGF0RW5nYWdlbWVudCwgcGVyZm9ybWFuY2VNZXRyaWNzLCBzdHVkeUdyb3VwUGFydGljaXBhdGlvbiwgc3R1ZGVudCB9ID0gZGF0YVxuICBjb25zdCByaXNrRmFjdG9ycyA9IFtdXG5cbiAgLy8gUGVyZm9ybWFuY2UtYmFzZWQgcmlza3NcbiAgaWYgKHBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlU2NvcmUgPCA2MCkge1xuICAgIHJpc2tGYWN0b3JzLnB1c2goe1xuICAgICAgdHlwZTogJ0xPV19QRVJGT1JNQU5DRScsXG4gICAgICBzZXZlcml0eTogJ0hJR0gnLFxuICAgICAgZGVzY3JpcHRpb246ICdDb25zaXN0ZW50bHkgbG93IHF1aXogc2NvcmVzJyxcbiAgICAgIHZhbHVlOiBwZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZVNjb3JlXG4gICAgfSlcbiAgfVxuXG4gIGlmIChwZXJmb3JtYW5jZU1ldHJpY3MuaW1wcm92ZW1lbnRUcmVuZCA8IC0xMCkge1xuICAgIHJpc2tGYWN0b3JzLnB1c2goe1xuICAgICAgdHlwZTogJ0RFQ0xJTklOR19QRVJGT1JNQU5DRScsXG4gICAgICBzZXZlcml0eTogJ0hJR0gnLFxuICAgICAgZGVzY3JpcHRpb246ICdQZXJmb3JtYW5jZSBkZWNsaW5pbmcgb3ZlciB0aW1lJyxcbiAgICAgIHZhbHVlOiBwZXJmb3JtYW5jZU1ldHJpY3MuaW1wcm92ZW1lbnRUcmVuZFxuICAgIH0pXG4gIH1cblxuICAvLyBFbmdhZ2VtZW50LWJhc2VkIHJpc2tzXG4gIGlmIChjaGF0RW5nYWdlbWVudC50b3RhbE1lc3NhZ2VzIDwgNSkge1xuICAgIHJpc2tGYWN0b3JzLnB1c2goe1xuICAgICAgdHlwZTogJ0xPV19FTkdBR0VNRU5UJyxcbiAgICAgIHNldmVyaXR5OiAnTUVESVVNJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVmVyeSBsb3cgY2hhdCBwYXJ0aWNpcGF0aW9uJyxcbiAgICAgIHZhbHVlOiBjaGF0RW5nYWdlbWVudC50b3RhbE1lc3NhZ2VzXG4gICAgfSlcbiAgfVxuXG4gIGlmIChjaGF0RW5nYWdlbWVudC5lbmdhZ2VtZW50RnJlcXVlbmN5IDwgMC4xKSB7XG4gICAgcmlza0ZhY3RvcnMucHVzaCh7XG4gICAgICB0eXBlOiAnSU5GUkVRVUVOVF9QQVJUSUNJUEFUSU9OJyxcbiAgICAgIHNldmVyaXR5OiAnTUVESVVNJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW5mcmVxdWVudCBsZWFybmluZyBhY3Rpdml0aWVzJyxcbiAgICAgIHZhbHVlOiBjaGF0RW5nYWdlbWVudC5lbmdhZ2VtZW50RnJlcXVlbmN5XG4gICAgfSlcbiAgfVxuXG4gIC8vIFN0dWR5IGdyb3VwIHJpc2tzXG4gIGlmICghc3R1ZHlHcm91cFBhcnRpY2lwYXRpb24uaGFzU3R1ZHlHcm91cHMpIHtcbiAgICByaXNrRmFjdG9ycy5wdXNoKHtcbiAgICAgIHR5cGU6ICdOT19TVFVEWV9HUk9VUFMnLFxuICAgICAgc2V2ZXJpdHk6ICdMT1cnLFxuICAgICAgZGVzY3JpcHRpb246ICdOb3QgcGFydGljaXBhdGluZyBpbiBzdHVkeSBncm91cHMnLFxuICAgICAgdmFsdWU6IDBcbiAgICB9KVxuICB9XG5cbiAgLy8gQ29uc2lzdGVuY3kgcmlza3NcbiAgaWYgKHBlcmZvcm1hbmNlTWV0cmljcy5jb25zaXN0ZW5jeVNjb3JlIDwgMzApIHtcbiAgICByaXNrRmFjdG9ycy5wdXNoKHtcbiAgICAgIHR5cGU6ICdJTkNPTlNJU1RFTlRfUEVSRk9STUFOQ0UnLFxuICAgICAgc2V2ZXJpdHk6ICdNRURJVU0nLFxuICAgICAgZGVzY3JpcHRpb246ICdIaWdobHkgdmFyaWFibGUgcXVpeiBwZXJmb3JtYW5jZScsXG4gICAgICB2YWx1ZTogcGVyZm9ybWFuY2VNZXRyaWNzLmNvbnNpc3RlbmN5U2NvcmVcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHJpc2tGYWN0b3JzXG59XG5cbmludGVyZmFjZSBJbnRlcnZlbnRpb24ge1xuICB0eXBlOiBzdHJpbmdcbiAgcHJpb3JpdHk6IHN0cmluZ1xuICBhY3Rpb246IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlSW50ZXJ2ZW50aW9uUmVjb21tZW5kYXRpb25zKHJpc2tGYWN0b3JzOiBhbnlbXSwgbWV0cmljczogYW55KTogSW50ZXJ2ZW50aW9uW10ge1xuICBjb25zdCBpbnRlcnZlbnRpb25zOiBJbnRlcnZlbnRpb25bXSA9IFtdXG5cbiAgcmlza0ZhY3RvcnMuZm9yRWFjaChyaXNrID0+IHtcbiAgICBzd2l0Y2ggKHJpc2sudHlwZSkge1xuICAgICAgY2FzZSAnTE9XX1BFUkZPUk1BTkNFJzpcbiAgICAgICAgaW50ZXJ2ZW50aW9ucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnQUNBREVNSUNfU1VQUE9SVCcsXG4gICAgICAgICAgcHJpb3JpdHk6ICdISUdIJyxcbiAgICAgICAgICBhY3Rpb246ICdTY2hlZHVsZSBvbmUtb24tb25lIHR1dG9yaW5nIHNlc3Npb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUHJvdmlkZSBhZGRpdGlvbmFsIGFjYWRlbWljIHN1cHBvcnQgYW5kIHJldmlldyBzdHVkeSBzdHJhdGVnaWVzJ1xuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdERUNMSU5JTkdfUEVSRk9STUFOQ0UnOlxuICAgICAgICBpbnRlcnZlbnRpb25zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdFQVJMWV9XQVJOSU5HJyxcbiAgICAgICAgICBwcmlvcml0eTogJ0hJR0gnLFxuICAgICAgICAgIGFjdGlvbjogJ0ltbWVkaWF0ZSBpbnN0cnVjdG9yIG1lZXRpbmcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWRkcmVzcyBkZWNsaW5pbmcgcGVyZm9ybWFuY2UgYmVmb3JlIGl0IGJlY29tZXMgY3JpdGljYWwnXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ0xPV19FTkdBR0VNRU5UJzpcbiAgICAgICAgaW50ZXJ2ZW50aW9ucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnRU5HQUdFTUVOVF9CT09TVCcsXG4gICAgICAgICAgcHJpb3JpdHk6ICdNRURJVU0nLFxuICAgICAgICAgIGFjdGlvbjogJ0VuY291cmFnZSBjaGF0IHBhcnRpY2lwYXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2VuZCBwZXJzb25hbGl6ZWQgbWVzc2FnZXMgdG8gaW5jcmVhc2UgZGlzY3Vzc2lvbiBpbnZvbHZlbWVudCdcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnTk9fU1RVRFlfR1JPVVBTJzpcbiAgICAgICAgaW50ZXJ2ZW50aW9ucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnU09DSUFMX0xFQVJOSU5HJyxcbiAgICAgICAgICBwcmlvcml0eTogJ0xPVycsXG4gICAgICAgICAgYWN0aW9uOiAnSW52aXRlIHRvIHN0dWR5IGdyb3VwJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Nvbm5lY3Qgd2l0aCBwZWVycyBmb3IgY29sbGFib3JhdGl2ZSBsZWFybmluZydcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnSU5DT05TSVNURU5UX1BFUkZPUk1BTkNFJzpcbiAgICAgICAgaW50ZXJ2ZW50aW9ucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnU1RVRFlfSEFCSVRTJyxcbiAgICAgICAgICBwcmlvcml0eTogJ01FRElVTScsXG4gICAgICAgICAgYWN0aW9uOiAnU3R1ZHkgc2tpbGxzIHdvcmtzaG9wJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0hlbHAgZGV2ZWxvcCBjb25zaXN0ZW50IHN0dWR5IHJvdXRpbmVzIGFuZCB0aW1lIG1hbmFnZW1lbnQnXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBpbnRlcnZlbnRpb25zXG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29ob3J0SW5zaWdodHMocHJlZGljdGlvbnM6IGFueVtdKSB7XG4gIGNvbnN0IHRvdGFsU3R1ZGVudHMgPSBwcmVkaWN0aW9ucy5sZW5ndGhcbiAgXG4gIC8vIFBlcmZvcm1hbmNlIGRpc3RyaWJ1dGlvblxuICBjb25zdCBwZXJmb3JtYW5jZURpc3RyaWJ1dGlvbiA9IHtcbiAgICBleGNlbGxlbnQ6IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IHAubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZVNjb3JlID49IDkwKS5sZW5ndGgsXG4gICAgZ29vZDogcHJlZGljdGlvbnMuZmlsdGVyKHAgPT4gcC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlU2NvcmUgPj0gODAgJiYgcC5tZXRyaWNzLnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlU2NvcmUgPCA5MCkubGVuZ3RoLFxuICAgIGF2ZXJhZ2U6IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IHAubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZVNjb3JlID49IDcwICYmIHAubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZVNjb3JlIDwgODApLmxlbmd0aCxcbiAgICBiZWxvd0F2ZXJhZ2U6IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IHAubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZVNjb3JlIDwgNzApLmxlbmd0aFxuICB9XG5cbiAgLy8gRW5nYWdlbWVudCBwYXR0ZXJuc1xuICBjb25zdCBlbmdhZ2VtZW50UGF0dGVybnMgPSB7XG4gICAgaGlnaEVuZ2FnZW1lbnQ6IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IHAubWV0cmljcy5jaGF0RW5nYWdlbWVudC5lbmdhZ2VtZW50U2NvcmUgPj0gNzApLmxlbmd0aCxcbiAgICBtb2RlcmF0ZUVuZ2FnZW1lbnQ6IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IHAubWV0cmljcy5jaGF0RW5nYWdlbWVudC5lbmdhZ2VtZW50U2NvcmUgPj0gNDAgJiYgcC5tZXRyaWNzLmNoYXRFbmdhZ2VtZW50LmVuZ2FnZW1lbnRTY29yZSA8IDcwKS5sZW5ndGgsXG4gICAgbG93RW5nYWdlbWVudDogcHJlZGljdGlvbnMuZmlsdGVyKHAgPT4gcC5tZXRyaWNzLmNoYXRFbmdhZ2VtZW50LmVuZ2FnZW1lbnRTY29yZSA8IDQwKS5sZW5ndGhcbiAgfVxuXG4gIC8vIFN1Y2Nlc3MgY29ycmVsYXRpb25cbiAgY29uc3QgY2hhdEVuZ2FnZW1lbnRTY29yZXMgPSBwcmVkaWN0aW9ucy5tYXAocCA9PiBwLm1ldHJpY3MuY2hhdEVuZ2FnZW1lbnQuZW5nYWdlbWVudFNjb3JlKVxuICBjb25zdCBwZXJmb3JtYW5jZVNjb3JlcyA9IHByZWRpY3Rpb25zLm1hcChwID0+IHAubWV0cmljcy5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZVNjb3JlKVxuICBjb25zdCBjb3JyZWxhdGlvbiA9IGNhbGN1bGF0ZUNvcnJlbGF0aW9uKGNoYXRFbmdhZ2VtZW50U2NvcmVzLCBwZXJmb3JtYW5jZVNjb3JlcylcblxuICByZXR1cm4ge1xuICAgIHBlcmZvcm1hbmNlRGlzdHJpYnV0aW9uLFxuICAgIGVuZ2FnZW1lbnRQYXR0ZXJucyxcbiAgICBjb3JyZWxhdGlvbjoge1xuICAgICAgY2hhdEVuZ2FnZW1lbnRWc1BlcmZvcm1hbmNlOiBjb3JyZWxhdGlvbixcbiAgICAgIHN0cmVuZ3RoOiBnZXRDb3JyZWxhdGlvblN0cmVuZ3RoKGNvcnJlbGF0aW9uKVxuICAgIH0sXG4gICAgdHJlbmRzOiB7XG4gICAgICBhdmVyYWdlSW1wcm92ZW1lbnQ6IHByZWRpY3Rpb25zLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmltcHJvdmVtZW50VHJlbmQsIDApIC8gdG90YWxTdHVkZW50cyxcbiAgICAgIHN0dWR5R3JvdXBQYXJ0aWNpcGF0aW9uOiBwcmVkaWN0aW9ucy5maWx0ZXIocCA9PiBwLm1ldHJpY3Muc3R1ZHlHcm91cFBhcnRpY2lwYXRpb24uaGFzU3R1ZHlHcm91cHMpLmxlbmd0aCAvIHRvdGFsU3R1ZGVudHNcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVFYXJseVdhcm5pbmdzKHByZWRpY3Rpb25zOiBhbnlbXSkge1xuICBjb25zdCB3YXJuaW5ncyA9IFtdXG5cbiAgLy8gQ3JpdGljYWwgcmlzayBzdHVkZW50c1xuICBjb25zdCBjcml0aWNhbFJpc2tTdHVkZW50cyA9IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IFxuICAgIHAucHJlZGljdGlvbnMucmlza0xldmVsID09PSAnSElHSCcgJiYgXG4gICAgcC5yaXNrRmFjdG9ycy5zb21lKChyZjogYW55KSA9PiByZi5zZXZlcml0eSA9PT0gJ0hJR0gnKVxuICApXG5cbiAgaWYgKGNyaXRpY2FsUmlza1N0dWRlbnRzLmxlbmd0aCA+IDApIHtcbiAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgIHR5cGU6ICdDUklUSUNBTF9SSVNLJyxcbiAgICAgIHNldmVyaXR5OiAnSElHSCcsXG4gICAgICBjb3VudDogY3JpdGljYWxSaXNrU3R1ZGVudHMubGVuZ3RoLFxuICAgICAgbWVzc2FnZTogYCR7Y3JpdGljYWxSaXNrU3R1ZGVudHMubGVuZ3RofSBzdHVkZW50cyByZXF1aXJlIGltbWVkaWF0ZSBpbnRlcnZlbnRpb25gLFxuICAgICAgc3R1ZGVudHM6IGNyaXRpY2FsUmlza1N0dWRlbnRzLm1hcChzID0+IHMuc3R1ZGVudC5uYW1lKVxuICAgIH0pXG4gIH1cblxuICAvLyBEZWNsaW5pbmcgcGVyZm9ybWFuY2UgdHJlbmRcbiAgY29uc3QgZGVjbGluaW5nU3R1ZGVudHMgPSBwcmVkaWN0aW9ucy5maWx0ZXIocCA9PiBcbiAgICBwLm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLmltcHJvdmVtZW50VHJlbmQgPCAtMTVcbiAgKVxuXG4gIGlmIChkZWNsaW5pbmdTdHVkZW50cy5sZW5ndGggPiAwKSB7XG4gICAgd2FybmluZ3MucHVzaCh7XG4gICAgICB0eXBlOiAnREVDTElOSU5HX1RSRU5EJyxcbiAgICAgIHNldmVyaXR5OiAnTUVESVVNJyxcbiAgICAgIGNvdW50OiBkZWNsaW5pbmdTdHVkZW50cy5sZW5ndGgsXG4gICAgICBtZXNzYWdlOiBgJHtkZWNsaW5pbmdTdHVkZW50cy5sZW5ndGh9IHN0dWRlbnRzIHNob3dpbmcgc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgZGVjbGluZWAsXG4gICAgICBzdHVkZW50czogZGVjbGluaW5nU3R1ZGVudHMubWFwKHMgPT4gcy5zdHVkZW50Lm5hbWUpXG4gICAgfSlcbiAgfVxuXG4gIC8vIExvdyBlbmdhZ2VtZW50IGFsZXJ0XG4gIGNvbnN0IGxvd0VuZ2FnZW1lbnRTdHVkZW50cyA9IHByZWRpY3Rpb25zLmZpbHRlcihwID0+IFxuICAgIHAubWV0cmljcy5jaGF0RW5nYWdlbWVudC50b3RhbE1lc3NhZ2VzIDwgMyAmJiBcbiAgICBwLm1ldHJpY3MucGVyZm9ybWFuY2VNZXRyaWNzLnRvdGFsQXR0ZW1wdHMgPiAwXG4gIClcblxuICBpZiAobG93RW5nYWdlbWVudFN0dWRlbnRzLmxlbmd0aCA+IDApIHtcbiAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgIHR5cGU6ICdMT1dfRU5HQUdFTUVOVCcsXG4gICAgICBzZXZlcml0eTogJ0xPVycsXG4gICAgICBjb3VudDogbG93RW5nYWdlbWVudFN0dWRlbnRzLmxlbmd0aCxcbiAgICAgIG1lc3NhZ2U6IGAke2xvd0VuZ2FnZW1lbnRTdHVkZW50cy5sZW5ndGh9IHN0dWRlbnRzIHdpdGggdmVyeSBsb3cgZW5nYWdlbWVudGAsXG4gICAgICBzdHVkZW50czogbG93RW5nYWdlbWVudFN0dWRlbnRzLm1hcChzID0+IHMuc3R1ZGVudC5uYW1lKVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gd2FybmluZ3Ncbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlQ29ycmVsYXRpb24oeDogbnVtYmVyW10sIHk6IG51bWJlcltdKSB7XG4gIGNvbnN0IG4gPSB4Lmxlbmd0aFxuICBpZiAobiA9PT0gMCkgcmV0dXJuIDBcblxuICBjb25zdCBzdW1YID0geC5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwsIDApXG4gIGNvbnN0IHN1bVkgPSB5LnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCwgMClcbiAgY29uc3Qgc3VtWFkgPSB4LnJlZHVjZSgoc3VtLCB2YWwsIGkpID0+IHN1bSArICh2YWwgKiB5W2ldKSwgMClcbiAgY29uc3Qgc3VtWDIgPSB4LnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArICh2YWwgKiB2YWwpLCAwKVxuICBjb25zdCBzdW1ZMiA9IHkucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgKHZhbCAqIHZhbCksIDApXG5cbiAgY29uc3QgbnVtZXJhdG9yID0gKG4gKiBzdW1YWSkgLSAoc3VtWCAqIHN1bVkpXG4gIGNvbnN0IGRlbm9taW5hdG9yID0gTWF0aC5zcXJ0KCgobiAqIHN1bVgyKSAtIChzdW1YICogc3VtWCkpICogKChuICogc3VtWTIpIC0gKHN1bVkgKiBzdW1ZKSkpXG5cbiAgcmV0dXJuIGRlbm9taW5hdG9yID09PSAwID8gMCA6IG51bWVyYXRvciAvIGRlbm9taW5hdG9yXG59XG5cbmZ1bmN0aW9uIGdldENvcnJlbGF0aW9uU3RyZW5ndGgoY29ycmVsYXRpb246IG51bWJlcikge1xuICBjb25zdCBhYnMgPSBNYXRoLmFicyhjb3JyZWxhdGlvbilcbiAgaWYgKGFicyA+PSAwLjcpIHJldHVybiAnU3Ryb25nJ1xuICBpZiAoYWJzID49IDAuMykgcmV0dXJuICdNb2RlcmF0ZSdcbiAgcmV0dXJuICdXZWFrJ1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsInJlcXVpcmVSb2xlIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ0aW1lUmFuZ2UiLCJwYXJzZUludCIsImdldCIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInN0dWRlbnRzIiwidXNlciIsImZpbmRNYW55Iiwid2hlcmUiLCJyb2xlIiwiaW5jbHVkZSIsImNoYXRNZXNzYWdlcyIsImNyZWF0ZWRBdCIsImd0ZSIsImlzRGVsZXRlZCIsImlzU3lzdGVtTWVzc2FnZSIsInNlbGVjdCIsImlkIiwicm9vbSIsInR5cGUiLCJxdWl6SWQiLCJhdHRlbXB0cyIsImNvbXBsZXRlZEF0Iiwic2NvcmUiLCJwYXNzZWQiLCJxdWl6IiwidGl0bGUiLCJwYXNzaW5nU2NvcmUiLCJzdHVkeUdyb3VwTWVtYmVyc2hpcHMiLCJncm91cCIsIm5hbWUiLCJwcmVkaWN0aW9ucyIsIm1hcCIsInN0dWRlbnQiLCJjaGF0RW5nYWdlbWVudCIsImNhbGN1bGF0ZUNoYXRFbmdhZ2VtZW50IiwicGVyZm9ybWFuY2VNZXRyaWNzIiwiY2FsY3VsYXRlUGVyZm9ybWFuY2VNZXRyaWNzIiwic3R1ZHlHcm91cFBhcnRpY2lwYXRpb24iLCJjYWxjdWxhdGVTdHVkeUdyb3VwUGFydGljaXBhdGlvbiIsInN1Y2Nlc3NQcm9iYWJpbGl0eSIsInByZWRpY3RTdWNjZXNzUHJvYmFiaWxpdHkiLCJyaXNrRmFjdG9ycyIsImlkZW50aWZ5Umlza0ZhY3RvcnMiLCJpbnRlcnZlbnRpb25zIiwiZ2VuZXJhdGVJbnRlcnZlbnRpb25SZWNvbW1lbmRhdGlvbnMiLCJlbWFpbCIsIm1ldHJpY3MiLCJyaXNrTGV2ZWwiLCJnZXRSaXNrTGV2ZWwiLCJuZXh0UXVpelN1Y2Nlc3NSYXRlIiwicHJlZGljdE5leHRRdWl6U3VjY2VzcyIsInNvcnQiLCJhIiwiYiIsImNvaG9ydEluc2lnaHRzIiwiZ2VuZXJhdGVDb2hvcnRJbnNpZ2h0cyIsImVhcmx5V2FybmluZ3MiLCJnZW5lcmF0ZUVhcmx5V2FybmluZ3MiLCJqc29uIiwic3VtbWFyeSIsInRvdGFsU3R1ZGVudHMiLCJsZW5ndGgiLCJoaWdoUmlza1N0dWRlbnRzIiwiZmlsdGVyIiwicCIsIm1lZGl1bVJpc2tTdHVkZW50cyIsImxvd1Jpc2tTdHVkZW50cyIsImF2ZXJhZ2VTdWNjZXNzUHJvYmFiaWxpdHkiLCJyZWR1Y2UiLCJzdW0iLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiLCJtZXNzYWdlcyIsInRvdGFsTWVzc2FnZXMiLCJxdWl6RGlzY3Vzc2lvbk1lc3NhZ2VzIiwibSIsInN0dWR5R3JvdXBNZXNzYWdlcyIsImdlbmVyYWxNZXNzYWdlcyIsImRheXNTaW5jZUZpcnN0TWVzc2FnZSIsIk1hdGgiLCJtYXgiLCJjZWlsIiwiZ2V0VGltZSIsImVuZ2FnZW1lbnRGcmVxdWVuY3kiLCJlbmdhZ2VtZW50VHlwZXMiLCJkaXZlcnNpdHlTY29yZSIsImVuZ2FnZW1lbnRTY29yZSIsIm1pbiIsInRvdGFsQXR0ZW1wdHMiLCJhdmVyYWdlU2NvcmUiLCJwYXNzUmF0ZSIsImltcHJvdmVtZW50VHJlbmQiLCJjb25zaXN0ZW5jeVNjb3JlIiwicmVjZW50UGVyZm9ybWFuY2UiLCJhdHRlbXB0IiwibWlkcG9pbnQiLCJmbG9vciIsImZpcnN0SGFsZkF2ZyIsInNsaWNlIiwic2Vjb25kSGFsZkF2ZyIsInZhcmlhbmNlIiwicG93Iiwic3RhbmRhcmREZXZpYXRpb24iLCJzcXJ0IiwicmVjZW50QXR0ZW1wdHMiLCJtZW1iZXJzaGlwcyIsImFjdGl2ZUdyb3VwcyIsInBhcnRpY2lwYXRpb25TY29yZSIsImhhc1N0dWR5R3JvdXBzIiwid2VpZ2h0cyIsInBlcmZvcm1hbmNlIiwic3R1ZHlHcm91cCIsImNvbnNpc3RlbmN5IiwicGVyZm9ybWFuY2VTY29yZSIsInN0dWR5R3JvdXBTY29yZSIsIndlaWdodGVkU2NvcmUiLCJyb3VuZCIsInRyZW5kQm9udXMiLCJlbmdhZ2VtZW50Qm9udXMiLCJiYXNlUmF0ZSIsInByZWRpY3RlZFJhdGUiLCJkYXRhIiwicHVzaCIsInNldmVyaXR5IiwiZGVzY3JpcHRpb24iLCJ2YWx1ZSIsImZvckVhY2giLCJyaXNrIiwicHJpb3JpdHkiLCJhY3Rpb24iLCJwZXJmb3JtYW5jZURpc3RyaWJ1dGlvbiIsImV4Y2VsbGVudCIsImdvb2QiLCJhdmVyYWdlIiwiYmVsb3dBdmVyYWdlIiwiZW5nYWdlbWVudFBhdHRlcm5zIiwiaGlnaEVuZ2FnZW1lbnQiLCJtb2RlcmF0ZUVuZ2FnZW1lbnQiLCJsb3dFbmdhZ2VtZW50IiwiY2hhdEVuZ2FnZW1lbnRTY29yZXMiLCJwZXJmb3JtYW5jZVNjb3JlcyIsImNvcnJlbGF0aW9uIiwiY2FsY3VsYXRlQ29ycmVsYXRpb24iLCJjaGF0RW5nYWdlbWVudFZzUGVyZm9ybWFuY2UiLCJzdHJlbmd0aCIsImdldENvcnJlbGF0aW9uU3RyZW5ndGgiLCJ0cmVuZHMiLCJhdmVyYWdlSW1wcm92ZW1lbnQiLCJ3YXJuaW5ncyIsImNyaXRpY2FsUmlza1N0dWRlbnRzIiwic29tZSIsInJmIiwiY291bnQiLCJtZXNzYWdlIiwicyIsImRlY2xpbmluZ1N0dWRlbnRzIiwibG93RW5nYWdlbWVudFN0dWRlbnRzIiwieCIsInkiLCJuIiwic3VtWCIsInZhbCIsInN1bVkiLCJzdW1YWSIsImkiLCJzdW1YMiIsInN1bVkyIiwibnVtZXJhdG9yIiwiZGVub21pbmF0b3IiLCJhYnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analytics/predictive/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireRole: () => (/* binding */ requireRole)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\nasync function getSession() {\n    try {\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const sessionCookie = cookieStore.get(\"user-session\");\n        if (!sessionCookie || !sessionCookie.value) {\n            return null;\n        }\n        // Validate that the cookie value is not empty or malformed\n        if (sessionCookie.value.trim() === \"\") {\n            return null;\n        }\n        const session = JSON.parse(sessionCookie.value);\n        // Validate that the session has required fields\n        if (!session || !session.id || !session.email || !session.name || !session.role) {\n            console.warn(\"Invalid session structure:\", session);\n            return null;\n        }\n        return session;\n    } catch (error) {\n        console.error(\"Error getting session:\", error);\n        return null;\n    }\n}\nasync function requireAuth() {\n    const session = await getSession();\n    if (!session) {\n        throw new Error(\"Authentication required\");\n    }\n    return session;\n}\nasync function requireRole(role) {\n    const session = await requireAuth();\n    if (session.role !== role) {\n        throw new Error(`Access denied. Required role: ${role}`);\n    }\n    return session;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzQztBQVUvQixlQUFlQztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsY0FBY0YscURBQU9BO1FBQzNCLE1BQU1HLGdCQUFnQkQsWUFBWUUsR0FBRyxDQUFDO1FBRXRDLElBQUksQ0FBQ0QsaUJBQWlCLENBQUNBLGNBQWNFLEtBQUssRUFBRTtZQUMxQyxPQUFPO1FBQ1Q7UUFFQSwyREFBMkQ7UUFDM0QsSUFBSUYsY0FBY0UsS0FBSyxDQUFDQyxJQUFJLE9BQU8sSUFBSTtZQUNyQyxPQUFPO1FBQ1Q7UUFFQSxNQUFNQyxVQUFVQyxLQUFLQyxLQUFLLENBQUNOLGNBQWNFLEtBQUs7UUFFOUMsZ0RBQWdEO1FBQ2hELElBQUksQ0FBQ0UsV0FBVyxDQUFDQSxRQUFRRyxFQUFFLElBQUksQ0FBQ0gsUUFBUUksS0FBSyxJQUFJLENBQUNKLFFBQVFLLElBQUksSUFBSSxDQUFDTCxRQUFRTSxJQUFJLEVBQUU7WUFDL0VDLFFBQVFDLElBQUksQ0FBQyw4QkFBOEJSO1lBQzNDLE9BQU87UUFDVDtRQUVBLE9BQU9BO0lBQ1QsRUFBRSxPQUFPUyxPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsTUFBTVYsVUFBVSxNQUFNTjtJQUN0QixJQUFJLENBQUNNLFNBQVM7UUFDWixNQUFNLElBQUlXLE1BQU07SUFDbEI7SUFDQSxPQUFPWDtBQUNUO0FBRU8sZUFBZVksWUFBWU4sSUFBYztJQUM5QyxNQUFNTixVQUFVLE1BQU1VO0lBQ3RCLElBQUlWLFFBQVFNLElBQUksS0FBS0EsTUFBTTtRQUN6QixNQUFNLElBQUlLLE1BQU0sQ0FBQyw4QkFBOEIsRUFBRUwsS0FBSyxDQUFDO0lBQ3pEO0lBQ0EsT0FBT047QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3F1aXotbWFuYWdlbWVudC1zeXN0ZW0vLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuaW1wb3J0IHsgVXNlclJvbGUgfSBmcm9tICdAL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25Vc2VyIHtcbiAgaWQ6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICByb2xlOiBVc2VyUm9sZVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2Vzc2lvbigpOiBQcm9taXNlPFNlc3Npb25Vc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpXG4gICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IGNvb2tpZVN0b3JlLmdldCgndXNlci1zZXNzaW9uJylcbiAgICBcbiAgICBpZiAoIXNlc3Npb25Db29raWUgfHwgIXNlc3Npb25Db29raWUudmFsdWUpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgY29va2llIHZhbHVlIGlzIG5vdCBlbXB0eSBvciBtYWxmb3JtZWRcbiAgICBpZiAoc2Vzc2lvbkNvb2tpZS52YWx1ZS50cmltKCkgPT09ICcnKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IHNlc3Npb24gPSBKU09OLnBhcnNlKHNlc3Npb25Db29raWUudmFsdWUpXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgc2Vzc2lvbiBoYXMgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLmlkIHx8ICFzZXNzaW9uLmVtYWlsIHx8ICFzZXNzaW9uLm5hbWUgfHwgIXNlc3Npb24ucm9sZSkge1xuICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIHNlc3Npb24gc3RydWN0dXJlOicsIHNlc3Npb24pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiBzZXNzaW9uXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzZXNzaW9uOicsIGVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKCk6IFByb21pc2U8U2Vzc2lvblVzZXI+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKVxuICBpZiAoIXNlc3Npb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJylcbiAgfVxuICByZXR1cm4gc2Vzc2lvblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZVJvbGUocm9sZTogVXNlclJvbGUpOiBQcm9taXNlPFNlc3Npb25Vc2VyPiB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCByZXF1aXJlQXV0aCgpXG4gIGlmIChzZXNzaW9uLnJvbGUgIT09IHJvbGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFjY2VzcyBkZW5pZWQuIFJlcXVpcmVkIHJvbGU6ICR7cm9sZX1gKVxuICB9XG4gIHJldHVybiBzZXNzaW9uXG59XG4iXSwibmFtZXMiOlsiY29va2llcyIsImdldFNlc3Npb24iLCJjb29raWVTdG9yZSIsInNlc3Npb25Db29raWUiLCJnZXQiLCJ2YWx1ZSIsInRyaW0iLCJzZXNzaW9uIiwiSlNPTiIsInBhcnNlIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwiY29uc29sZSIsIndhcm4iLCJlcnJvciIsInJlcXVpcmVBdXRoIiwiRXJyb3IiLCJyZXF1aXJlUm9sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdWl6LW1hbmFnZW1lbnQtc3lzdGVtLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fpredictive%2Froute&page=%2Fapi%2Fanalytics%2Fpredictive%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fpredictive%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDocuments%5CInfTech-quiz-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();